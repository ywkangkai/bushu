"use strict";(self["webpackChunkvue_admin"]=self["webpackChunkvue_admin"]||[]).push([[360],{3360:function(e,t,n){n.r(t),n.d(t,{default:function(){return u}});var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"table"},[n("div",{staticClass:"crumbs"},[n("el-breadcrumb",{attrs:{separator:"/"}},[n("el-breadcrumb-item",[n("i",{staticClass:"el-icon-lx-calendar"}),e._v(" 项目管理")]),n("el-breadcrumb-item",[e._v("项目列表")])],1)],1),n("div",{staticClass:"container"},[n("div",{staticClass:"handle-box"},[n("el-button",{staticClass:"handle-del mr10",attrs:{type:"primary",icon:"el-icon-delete"},on:{click:e.delAll}},[e._v("批量删除")]),n("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"按项目名称搜索"},model:{value:e.select_project,callback:function(t){e.select_project=t},expression:"select_project"}}),n("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")])],1),n("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.tableData,border:"",stripe:""},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),n("el-table-column",{attrs:{type:"index",label:"序号",width:"55",align:"center"}}),n("el-table-column",{attrs:{prop:"projectname",label:"项目名称",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-popover",{attrs:{trigger:"hover",placement:"top"}},[n("router-link",{staticClass:"register_link",attrs:{to:"/interfaces_list"}},[n("p",[e._v("接口数: "+e._s(t.row.interfaces_set.length))])]),n("router-link",{staticClass:"register_link",attrs:{to:"/testsuites_list"}},[n("p",[e._v("套件数: "+e._s(t.row.testsuits))])]),n("router-link",{staticClass:"register_link",attrs:{to:"/testcases_list"}},[n("p",[e._v("用例数: "+e._s(t.row.testcases))])]),n("router-link",{staticClass:"register_link",attrs:{to:"/configures_list"}},[n("p",[e._v("配置数: "+e._s(t.row.configures))])]),n("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[n("el-tag",{attrs:{size:"medium"}},[e._v(e._s(t.row.projectname))])],1)],1)]}}])}),n("el-table-column",{attrs:{prop:"leader",label:"项目负责人",width:"100",align:"center"}}),n("el-table-column",{attrs:{prop:"appname",label:"应用名称",width:"250"}}),n("el-table-column",{attrs:{prop:"test",label:"测试人员",width:"100",align:"center"}}),n("el-table-column",{attrs:{prop:"create_time",label:"创建时间",sortable:"",align:"center"}}),n("el-table-column",{attrs:{prop:"update_time",label:"更新时间",sortable:"",align:"center"}}),n("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(n){return e.handleRun(t.$index,t.row)}}},[e._v("运行")]),n("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(n){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),n("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(n){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),n("div",{staticClass:"pagination"},[n("el-pagination",{attrs:{background:"","page-sizes":[4,5,8,10,20],layout:"total, sizes, prev, pager, next, jumper",total:e.total_nums,"page-size":e.page_size},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})],1)],1),n("el-dialog",{attrs:{title:"编辑项目",visible:e.editVisible,width:"30%",center:""},on:{"update:visible":function(t){e.editVisible=t}}},[n("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px"}},[n("el-form-item",{attrs:{label:"项目名称"}},[n("el-input",{attrs:{clearable:""},model:{value:e.form.projectname,callback:function(t){e.$set(e.form,"projectname",t)},expression:"form.projectname"}})],1),n("el-form-item",{attrs:{label:"项目负责人"}},[n("el-input",{attrs:{clearable:""},model:{value:e.form.leader,callback:function(t){e.$set(e.form,"leader",t)},expression:"form.leader"}})],1),n("el-form-item",{attrs:{label:"测试人员"}},[n("el-input",{attrs:{clearable:""},model:{value:e.form.test,callback:function(t){e.$set(e.form,"test",t)},expression:"form.test"}})],1),n("el-form-item",{attrs:{label:"应用名称"}},[n("el-input",{attrs:{clearable:""},model:{value:e.form.appname,callback:function(t){e.$set(e.form,"appname",t)},expression:"form.appname"}})],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.editVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.saveEdit}},[e._v("确 定")])],1)],1),n("el-dialog",{attrs:{title:"删除项目",visible:e.delVisible,width:"300px",center:""},on:{"update:visible":function(t){e.delVisible=t}}},[n("div",{staticClass:"del-dialog-cnt"},[e._v("删除不可恢复，是否确定删除？")]),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.delVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.deleteRow}},[e._v("确 定")])],1)]),n("el-dialog",{attrs:{title:"运行项目",visible:e.runVisible,width:"30%",center:""},on:{"update:visible":function(t){e.runVisible=t}}},[n("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px"}},[n("el-form-item",{attrs:{label:"运行环境"}},[n("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.env_id,callback:function(t){e.env_id=t},expression:"env_id"}},e._l(e.envs_id_names,(function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",[e._v("取 消")]),n("el-button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{type:"primary"},on:{click:e.openFullScreen1}},[e._v("运行")])],1)],1)],1)},i=[],s=n(2552),a={name:"basetable",data(){return{tableData:[],cur_page:1,page_size:10,total_nums:1,multipleSelection:[],select_project:"",del_list:[],editVisible:!1,delVisible:!1,runVisible:!1,form:{},project_idx:-1,project_id:-1,env_id:"",envs_id_names:[]}},created(){this.getData(),this.getEnvsIdNames()},methods:{handleCurrentChange(e){this.cur_page=e,this.getData()},handleSizeChange(e){this.page_size=e,this.getData()},getData(){(0,s.d9)({page:this.cur_page,size:this.page_size}).then((e=>{this.tableData=e.data.results,this.cur_page=e.data.current_page_num||1,this.total_nums=e.data.count||1}))},search(){(0,s.x4)({projectname:this.select_project}).then((e=>{this.tableData=e.data.results}))},handleEdit(e,t){this.project_idx=e,this.project_id=t.id,this.form={...t},this.editVisible=!0},handleRun(e,t){this.project_idx=e,this.project_id=t.id,this.form=t,this.runVisible=!0},handleDelete(e,t){this.project_idx=e,this.project_id=t.id,this.delVisible=!0},delAll(){(0,s.L$)({idlist:this.del_list}).then((e=>{this.$message.success("删除成功"),this.tableData=e.data.results})).catch((e=>{this.$message.error("服务器错误")}))},handleSelectionChange(e){let t=e,n=[];for(var r=0;r<t.length;r++)n.push(t[r]["id"]);this.del_list=n},saveEdit(){""!==this.form.projectname?this.form.projectname.length>20?this.$message.error("项目名称不能超过20个字符"):(0,s.NV)(this.project_id,this.form).then((e=>{this.editVisible=!1,this.$message.success("修改成功"),this.tableData=e.data.results})).catch((e=>{this.editVisible=!1,this.$message.error("服务器错误")})):this.$message.error("请填写项目名称")},deleteRow(){(0,s.th)(this.project_id).then((e=>{this.$message.success("删除成功"),this.delVisible=!1,this.tableData=e.data.results,this.cur_page=e.data.current_page_num||1,this.total_nums=e.data.count||1})).catch((e=>{this.$message.error("服务器错误")}))},getEnvsIdNames(){(0,s._X)().then((e=>{this.envs_id_names=e.data})).catch((e=>{this.$message.error("服务器错误")}))},open(e){this.$confirm("用例执行完成，是否前往查看报告?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.$router.push({path:`/reports_view/${e.data.id}`})})).catch((()=>{}))},async openFullScreen1(){if(""===this.env_id)this.$message.error("请选择运行环境");else{this.runVisible=!1,this.fullscreenLoading=!0;let e=await(0,s.jJ)({pid:this.project_id,env_id:this.env_id});if(console.log(e),"当前接口不存在用例无法运行"===e.data.message)return this.fullscreenLoading=!1,void this.$message.error("当前接口未添加用例无法执行");e.status,this.fullscreenLoading=!1,this.open(e)}}}},l=a,o=n(1001),c=(0,o.Z)(l,r,i,!1,null,"2028e79b",null),u=c.exports},2552:function(e,t,n){n.d(t,{$8:function(){return te},$q:function(){return A},AH:function(){return le},AZ:function(){return _},B:function(){return p},Bx:function(){return T},Cs:function(){return U},DC:function(){return R},Dr:function(){return ue},FP:function(){return m},G3:function(){return P},GL:function(){return pe},GW:function(){return ve},IG:function(){return h},KL:function(){return ne},Kh:function(){return $e},Kq:function(){return _e},L$:function(){return u},LO:function(){return x},Lu:function(){return Y},NM:function(){return se},NV:function(){return o},NW:function(){return D},OM:function(){return ee},PT:function(){return j},QG:function(){return Ce},RB:function(){return L},RD:function(){return xe},RQ:function(){return V},Sp:function(){return me},TR:function(){return H},Tg:function(){return oe},Tj:function(){return he},Vx:function(){return q},W7:function(){return I},WD:function(){return b},XC:function(){return Q},Z4:function(){return K},ZH:function(){return G},Zf:function(){return v},_X:function(){return f},ah:function(){return ie},aj:function(){return y},ay:function(){return S},cQ:function(){return je},cu:function(){return fe},d9:function(){return a},ei:function(){return ae},iO:function(){return C},ie:function(){return z},in:function(){return F},jJ:function(){return g},jh:function(){return be},kJ:function(){return de},kq:function(){return M},lO:function(){return ye},n:function(){return d},nL:function(){return w},nk:function(){return N},nq:function(){return $},ny:function(){return Z},o:function(){return E},pU:function(){return J},pW:function(){return ge},s2:function(){return ce},tK:function(){return k},tc:function(){return ke},th:function(){return c},vi:function(){return re},vj:function(){return W},x4:function(){return l},xQ:function(){return B},yr:function(){return O},z:function(){return X}});var r=n(4206),i=n.n(r);let s="http://kk.uoyo.net:8080";const a=e=>i().get(`${s}/project/list/?page=`+e.page+"&size="+e.size,e),l=e=>i().post(`${s}/project/detail/`,e),o=(e,t)=>i().put(`${s}/project/edit/`+e+"/",t),c=e=>i()["delete"](`${s}/project/delete/`+e+"/"),u=e=>i().post(`${s}/project/deleteall/`,e),p=e=>i().post(`${s}/project/add/`,e),d=()=>i().get(`${s}/interface/project/name`),f=()=>i().get(`${s}/project/get/env/`),g=e=>i().post(`${s}/project/run/`,e),h=e=>i().post(`${s}/interface/add/`,e),m=e=>i().get(`${s}/interface/list/?page=`+e.page+"&size="+e.size,e),b=(e,t)=>i().put(`${s}/interface/edit/`+e+"/",t),$=e=>i()["delete"](`${s}/interface/delete/`+e+"/"),_=e=>i().post(`${s}/interface/deleteall/`,e),v=e=>i().post(`${s}/interface/detail/`,e),j=()=>i().get(`${s}/interface/env/`),k=e=>i().post(`${s}/interface/run/`,e),y=e=>i().get(`${s}/env/list/?page=`+e.page+"&size="+e.size,e),x=(e,t)=>i().put(`${s}/env/edit/`+e+"/",t),C=e=>i()["delete"](`${s}/env/delete/`+e+"/"),z=e=>i().post(`${s}/env/add/`,e),w=e=>i().post(`${s}/env/detail/`,e),V=e=>i().post(`${s}/env/deleteall/`,e),D=e=>i().get(`${s}/debugtalk/list/?page=`+e.page+"&size="+e.size,e),L=e=>i().post(`${s}/debugtalk/detail/`,e),S=e=>i().get(`${s}/debugtalk/code/`+e+"/"),R=e=>i().put(`${s}/debugtalk/update/`,e),E=()=>i().get(`${s}/config/project/name/`),N=e=>i().post(`${s}/config/interface/name/`,e),T=e=>i().post(`${s}/config/save/`,e),B=e=>i().get(`${s}/config/list/?page=`+e.page+"&size="+e.size,e),G=e=>i().post(`${s}/config/detail/`,e),W=e=>i()["delete"](`${s}/config/delete/`+e+"/"),Z=e=>i().post(`${s}/config/deleteall/`,e),q=e=>i().get(`${s}/config/detail/`+e+"/"),A=(e,t)=>i().put(`${s}/config/update/`+e+"/",t),K=()=>i().get(`${s}/testsuite/project/name/`),O=e=>i().post(`${s}/testsuite/interface/name/`,e),Q=e=>i().post(`${s}/testsuite/add/`,e),F=e=>i().get(`${s}/testsuite/list/?page=`+e.page+"&size="+e.size,e),I=e=>i().post(`${s}/testsuite/detail/`,e),J=e=>i().get(`${s}/testsuite/detail/`+e+"/"),X=(e,t)=>i().put(`${s}/testsuite/update/`+e+"/",t),H=e=>i().post(`${s}/testsuite/deleteall/`,e),M=e=>i()["delete"](`${s}/testsuite/delete/`+e+"/"),P=()=>i().get(`${s}/testcase/project/name/`),U=e=>i().post(`${s}/testcase/interface/name/`,e),Y=e=>i().post(`${s}/testcase/configure/name/`,e),ee=e=>i().post(`${s}/testcase/name/`,e),te=e=>i().post(`${s}/testcase/add/`,e),ne=e=>i().get(`${s}/testcase/list/?page=`+e.page+"&size="+e.size),re=e=>i().post(`${s}/testcase/detail/`,e),ie=e=>i()["delete"](`${s}/testcase/delete/`+e+"/"),se=e=>i().post(`${s}/testcase/deleteall/`,e),ae=e=>i().get(`${s}/testcase/get/detail/`+e+"/"),le=e=>i().put(`${s}/testcase/update/`,e),oe=()=>i().get(`${s}/testcase/get/env/`),ce=e=>i().post(`${s}/testcase/run/`,e),ue=e=>i().get(`${s}/report/list/?page=`+e.page+"&size="+e.size),pe=e=>i().get(`${s}/report/view/`+e+"/"),de=e=>i().post(`${s}/report/download/`+e+"/"),fe=e=>i()["delete"](`${s}/report/delete/`+e+"/"),ge=e=>i().post(`${s}/report/deleteall/`,e),he=e=>i().post(`${s}/report/open/`,e),me=()=>i().get(`${s}/summary/data/`),be=e=>i().post(`${s}/repository/add/`,e),$e=e=>i().get(`${s}/repository/list/?page=`+e.page+"&size="+e.size),_e=e=>i().post(`${s}/repository/detail/`,e),ve=e=>i().put(`${s}/repository/update/`,e),je=e=>i()["delete"](`${s}/repository/delete/`+e+"/"),ke=e=>i().post(`${s}/repository/deleteall/`,e),ye=e=>i().post(`${s}/repository/search/`,e),xe=e=>i().post(`${s}/repository/git/`,e),Ce=e=>i().post(`${s}/repository/compile/`,e)}}]);
//# sourceMappingURL=360.5a840bb8.js.map