(self["webpackChunkvue_admin"]=self["webpackChunkvue_admin"]||[]).push([[891],{4891:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return d}});var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"crumbs"},[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",[r("i",{staticClass:"el-icon-lx-calendar"}),e._v(" 配置管理")]),r("el-breadcrumb-item",[e._v("编辑配置")])],1)],1),r("div",{staticClass:"container"},[r("el-tabs",{attrs:{type:"border-card"}},[r("el-tab-pane",{attrs:{label:"请求头|全局变量"}},[r("el-tabs",{staticStyle:{margin:"0 0 0 10px"},model:{value:e.otherShow,callback:function(t){e.otherShow=t},expression:"otherShow"}},[r("el-tab-pane",{attrs:{label:"Headers",name:"first"}},[r("el-table",{staticClass:"h-b-e-a-style",attrs:{data:e.apiMsgData.header,size:"mini",stripe:"","show-header":!1,"row-style":{"background-color":"rgb(250, 250, 250)"}}},[r("el-table-column",{attrs:{property:"key",label:"Key","header-align":"center",minWidth:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-input",{attrs:{size:"mini",placeholder:"key"},model:{value:t.row.key,callback:function(r){e.$set(t.row,"key",r)},expression:"scope.row.key"}})]}}])}),r("el-table-column",{attrs:{property:"value",label:"Value","header-align":"center",minWidth:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-input",{attrs:{size:"mini",placeholder:"value"},model:{value:t.row.value,callback:function(r){e.$set(t.row,"value",r)},expression:"scope.row.value"}})]}}])}),r("el-table-column",{attrs:{property:"value",label:"操作","header-align":"center",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},nativeOn:{click:function(r){return e.delTableRow("header",t.$index)}}})]}}])})],1)],1),r("el-tab-pane",{attrs:{label:"全局变量",name:"second"}},[r("el-table",{staticClass:"h-b-e-a-style",attrs:{data:e.apiMsgData.globalVar,size:"mini",stripe:"","show-header":!1,"row-style":{"background-color":"rgb(250, 250, 250)"}}},[r("el-table-column",{attrs:{property:"key",label:"Key","header-align":"center",minWidth:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-input",{attrs:{size:"mini",placeholder:"key"},model:{value:t.row.key,callback:function(r){e.$set(t.row,"key",r)},expression:"scope.row.key"}})]}}])}),r("el-table-column",{attrs:{label:"type","header-align":"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-select",{attrs:{size:"mini"},model:{value:t.row.param_type,callback:function(r){e.$set(t.row,"param_type",r)},expression:"scope.row.param_type"}},e._l(e.paramTypes,(function(e){return r("el-option",{key:e,attrs:{value:e}})})),1)]}}])}),r("el-table-column",{attrs:{property:"value",label:"Value","header-align":"center",minWidth:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-input",{attrs:{size:"mini",placeholder:"value"},model:{value:t.row.value,callback:function(r){e.$set(t.row,"value",r)},expression:"scope.row.value"}})]}}])}),r("el-table-column",{attrs:{property:"value",label:"操作","header-align":"center",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},nativeOn:{click:function(r){return e.delTableRow("globalVar",t.$index)}}})]}}])})],1)],1)],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:2}},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSubmit()}}},[e._v("更新")])],1),r("el-col",{attrs:{span:2}},[r("el-button",{on:{click:function(t){return e.resetForm("form")}}},[e._v("取消")])],1)],1)],1),r("el-dialog",{attrs:{title:"编辑配置",visible:e.editVisible,width:"28%",center:""},on:{"update:visible":function(t){e.editVisible=t}}},[r("el-form",{attrs:{"label-width":"120px"}},[r("el-form-item",{attrs:{label:"配置名称",required:""}},[r("el-input",{attrs:{clearable:""},model:{value:e.configure_name,callback:function(t){e.configure_name=t},expression:"configure_name"}})],1),r("el-form-item",{attrs:{label:"编写人员",required:""}},[r("el-input",{attrs:{clearable:""},model:{value:e.author,callback:function(t){e.author=t},expression:"author"}})],1),r("el-form-item",{attrs:{label:"选择项目",required:""}},[r("el-select",{attrs:{placeholder:"请选择"},on:{change:function(t){return e.getInterfacesByProjectID(e.selected_project_id)}},model:{value:e.selected_project_id,callback:function(t){e.selected_project_id=t},expression:"selected_project_id"}},e._l(e.project_names,(function(e,t){return r("el-option",{key:t,attrs:{label:e.projectname,value:e.id}})})),1)],1),r("el-form-item",{attrs:{label:"选择接口",required:""}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.selected_interface_id,callback:function(t){e.selected_interface_id=t},expression:"selected_interface_id"}},e._l(e.interfaces,(function(e,t){return r("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1)],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.editVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.saveEdit}},[e._v("确 定")])],1)],1)],1)},n=[],i=r(9726),l=(r(4916),r(7601),r(9653),r(561),r(8862),r(2552)),o={name:"baseform",data:function(){return{current_configure_id:null,editVisible:!1,apiMsgData:{id:null,name:"",header:[{key:null,value:null}],globalVar:[{key:null,value:null,param_type:"string"}]},bodyShow:"second",otherShow:"first",paramTypes:["string","int","float","boolean"],cell:Object(),project_names:[],selected_project_id:null,selected_interface_id:null,selected_configure_id:null,configure_name:null,author:"",interfaces:[]}},created:function(){this.current_configure_id=this.$route.params.id,this.getProjectNames(),this.getConfigureDetail()},methods:{onSubmit:function(){this.editVisible=!0},handleData1:function(e,t){for(var r=[],a=0;a<e.length;a++){var n=e[a].key;if(!n)return this.$message.error(t+"的key为空!"),[];var i=e[a].param_type,l=e[a].value;if("int"===i){if(!/^\d+$/.test(l))return this.$message.error(t+"不是整数int类型!"),[];l=Number(l)}else if("float"===i){if(!/^[+-]?\d+(\.\d+)?$/.test(l))return this.$message.error(t+"不是小数float类型!"),[];l=Number(l)}else if("boolean"===i)if(/^(true|True|TRUE|1|0)$/.test(l))l=!0;else{if(!/^(false|False|FALSE|0)$/.test(l))return this.$message.error(t+"不是布尔boolean类型!"),[];l=!1}var o={};o[n]=l,r.push(o)}return r},handleData2:function(e,t){for(var r={},a=0;a<e.length;a++){var n=e[a].key;if(!n)return this.$message.error(t+"的key为空!"),[];r[n]=e[a].value}return r},saveEdit:function(){var e=this;if(null!==this.configure_name)if(""!==this.author)if(null!==this.selected_project_id&&null!==this.selected_interface_id){var t={name:this.configure_name,interface:{pid:this.selected_project_id,iid:this.selected_interface_id},author:this.author,request:{config:{name:this.configure_name,request:{}}}},r=this.apiMsgData.globalVar;if(r.splice(-1,1),0!==r.length){var a=this.handleData1(r,"全局变量variables");if(0===a.length)return;t.request.config["variables"]=a}var n=this.apiMsgData.header;if(n.splice(-1,1),0!==n.length){var o=this.handleData2(n,"请求头header");if(0===o.length)return;t.request.config.request["headers"]=o}t.include=JSON.stringify(t.include),t.request=JSON.stringify(t.request),(0,l.$q)(this.current_configure_id,t).then((function(t){e.editVisible=!1,e.$message.success("更新成功")})).catch((function(t){e.editVisible=!1,"object"===(0,i.Z)(t)&&t.hasOwnProperty("name")?(console.log(t),e.$message.error("更新配置失败")):(console.log(t),e.$message.error("服务器错误"))}))}else this.$message.error("未选择所属项目或者接口!");else this.$message.error("编写人员名称不能为空!");else this.$message.error("配置名称不能为空!")},getProjectNames:function(){var e=this;(0,l.o)().then((function(t){e.project_names=t.data.data})).catch((function(e){that.$message.error("服务器错误")}))},getInterfacesByProjectID:function(e){var t=this;(0,l.nk)({id:e}).then((function(e){t.interfaces=e.data.data})).catch((function(e){that.$message.error("服务器错误")}))},changeResult:function(){for(var e=this.selected.length,t="[",r=0;r<e;r++)t+=r===e-1?this.selected[r].id+"]":this.selected[r].id+", ";0===e&&(t="[]"),this.selected_testcase_id=JSON.parse(t)},delTableRow:function(e,t){"variable"===e?this.apiMsgData.variable.splice(t,1):"header"===e?this.apiMsgData.header.splice(t,1):"globalVar"===e&&this.apiMsgData.globalVar.splice(t,1)},addTableRow:function(e){"variable"===e?this.apiMsgData.variable.push({key:null,value:null,param_type:"string"}):"header"===e?this.apiMsgData.header.push({key:null,value:null}):"globalVar"===e&&this.apiMsgData.globalVar.push({key:null,value:null,param_type:"string"})},tempNum:function(e){this.temp_num=e},resetLine:function(){this.cell.style.height="18px"},showLine:function(e,t){this.cell=document.getElementById(e+t),this.cell.style.height=this.cell.scrollHeight+"px"},changeLine:function(){if(this.cell.style.height!==this.cell.scrollHeight+"px"){var e=parseInt(this.cell.style.height.substring(0,this.cell.style.height.length-2));e-this.cell.scrollHeight===2?this.cell.style.height=e-18+"px":this.cell.style.height=this.cell.scrollHeight+"px"}},getConfigureDetail:function(){var e=this;(0,l.Vx)(this.current_configure_id).then((function(t){console.log(t),e.configure_name=t.data.configure_name,e.author=t.data.author,e.selected_project_id=t.data.selected_project_id,e.getInterfacesByProjectID(e.selected_project_id),e.selected_interface_id=t.data.selected_interface_id,e.apiMsgData.globalVar=t.data.globalVar,e.apiMsgData.header=t.data.header})).catch((function(t){e.$message.error("服务器错误")}))}},computed:{monitorHeader:function(){return this.apiMsgData.header},monitorGlobalVar:function(){return this.apiMsgData.globalVar}},watch:{monitorHeader:{handler:function(){0===this.apiMsgData.header.length&&this.addTableRow("header"),(this.apiMsgData.header[this.apiMsgData.header.length-1]["key"]||this.apiMsgData.header[this.apiMsgData.header.length-1]["value"])&&this.addTableRow("header")},deep:!0},monitorGlobalVar:{handler:function(){0===this.apiMsgData.globalVar.length&&this.addTableRow("globalVar"),(this.apiMsgData.globalVar[this.apiMsgData.globalVar.length-1]["key"]||this.apiMsgData.globalVar[this.apiMsgData.globalVar.length-1]["value"])&&this.addTableRow("globalVar")},deep:!0}}},s=o,c=r(1001),u=(0,c.Z)(s,a,n,!1,null,"24cc2316",null),d=u.exports},1194:function(e,t,r){var a=r(7293),n=r(5112),i=r(7392),l=n("species");e.exports=function(e){return i>=51||!a((function(){var t=[],r=t.constructor={};return r[l]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},9587:function(e,t,r){var a=r(614),n=r(111),i=r(7674);e.exports=function(e,t,r){var l,o;return i&&a(l=t.constructor)&&l!==r&&n(o=l.prototype)&&o!==r.prototype&&i(e,o),e}},3111:function(e,t,r){var a=r(1702),n=r(4488),i=r(1340),l=r(1361),o=a("".replace),s="["+l+"]",c=RegExp("^"+s+s+"*"),u=RegExp(s+s+"*$"),d=function(e){return function(t){var r=i(n(t));return 1&e&&(r=o(r,c,"")),2&e&&(r=o(r,u,"")),r}};e.exports={start:d(1),end:d(2),trim:d(3)}},863:function(e,t,r){var a=r(1702);e.exports=a(1..valueOf)},1361:function(e){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},561:function(e,t,r){"use strict";var a=r(2109),n=r(7854),i=r(1400),l=r(9303),o=r(6244),s=r(7908),c=r(5417),u=r(6135),d=r(1194),f=d("splice"),h=n.TypeError,p=Math.max,g=Math.min,b=9007199254740991,m="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!f},{splice:function(e,t){var r,a,n,d,f,v,y=s(this),_=o(y),k=i(e,_),w=arguments.length;if(0===w?r=a=0:1===w?(r=0,a=_-k):(r=w-2,a=g(p(l(t),0),_-k)),_+r-a>b)throw h(m);for(n=c(y,a),d=0;d<a;d++)f=k+d,f in y&&u(n,d,y[f]);if(n.length=a,r<a){for(d=k;d<_-a;d++)f=d+a,v=d+r,f in y?y[v]=y[f]:delete y[v];for(d=_;d>_-a+r;d--)delete y[d-1]}else if(r>a)for(d=_-a;d>k;d--)f=d+a-1,v=d+r-1,f in y?y[v]=y[f]:delete y[v];for(d=0;d<r;d++)y[d+k]=arguments[d+2];return y.length=_-a+r,n}})},8862:function(e,t,r){var a=r(2109),n=r(7854),i=r(5005),l=r(2104),o=r(1702),s=r(7293),c=n.Array,u=i("JSON","stringify"),d=o(/./.exec),f=o("".charAt),h=o("".charCodeAt),p=o("".replace),g=o(1..toString),b=/[\uD800-\uDFFF]/g,m=/^[\uD800-\uDBFF]$/,v=/^[\uDC00-\uDFFF]$/,y=function(e,t,r){var a=f(r,t-1),n=f(r,t+1);return d(m,e)&&!d(v,n)||d(v,e)&&!d(m,a)?"\\u"+g(h(e,0),16):e},_=s((function(){return'"\\udf06\\ud834"'!==u("\udf06\ud834")||'"\\udead"'!==u("\udead")}));u&&a({target:"JSON",stat:!0,forced:_},{stringify:function(e,t,r){for(var a=0,n=arguments.length,i=c(n);a<n;a++)i[a]=arguments[a];var o=l(u,null,i);return"string"==typeof o?p(o,b,y):o}})},9653:function(e,t,r){"use strict";var a=r(9781),n=r(7854),i=r(1702),l=r(4705),o=r(1320),s=r(2597),c=r(9587),u=r(7976),d=r(2190),f=r(7593),h=r(7293),p=r(8006).f,g=r(1236).f,b=r(3070).f,m=r(863),v=r(3111).trim,y="Number",_=n[y],k=_.prototype,w=n.TypeError,S=i("".slice),D=i("".charCodeAt),x=function(e){var t=f(e,"number");return"bigint"==typeof t?t:V(t)},V=function(e){var t,r,a,n,i,l,o,s,c=f(e,"number");if(d(c))throw w("Cannot convert a Symbol value to a number");if("string"==typeof c&&c.length>2)if(c=v(c),t=D(c,0),43===t||45===t){if(r=D(c,2),88===r||120===r)return NaN}else if(48===t){switch(D(c,1)){case 66:case 98:a=2,n=49;break;case 79:case 111:a=8,n=55;break;default:return+c}for(i=S(c,2),l=i.length,o=0;o<l;o++)if(s=D(i,o),s<48||s>n)return NaN;return parseInt(i,a)}return+c};if(l(y,!_(" 0o1")||!_("0b1")||_("+0x1"))){for(var M,$=function(e){var t=arguments.length<1?0:_(x(e)),r=this;return u(k,r)&&h((function(){m(r)}))?c(Object(t),r,$):t},N=a?p(_):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),I=0;N.length>I;I++)s(_,M=N[I])&&!s($,M)&&b($,M,g(_,M));$.prototype=k,k.constructor=$,o(n,y,$)}},8783:function(e,t,r){"use strict";var a=r(8710).charAt,n=r(1340),i=r(9909),l=r(654),o="String Iterator",s=i.set,c=i.getterFor(o);l(String,"String",(function(e){s(this,{type:o,string:n(e),index:0})}),(function(){var e,t=c(this),r=t.string,n=t.index;return n>=r.length?{value:void 0,done:!0}:(e=a(r,n),t.index+=e.length,{value:e,done:!1})}))},1817:function(e,t,r){"use strict";var a=r(2109),n=r(9781),i=r(7854),l=r(1702),o=r(2597),s=r(614),c=r(7976),u=r(1340),d=r(3070).f,f=r(9920),h=i.Symbol,p=h&&h.prototype;if(n&&s(h)&&(!("description"in p)||void 0!==h().description)){var g={},b=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:u(arguments[0]),t=c(p,this)?new h(e):void 0===e?h():h(e);return""===e&&(g[t]=!0),t};f(b,h),b.prototype=p,p.constructor=b;var m="Symbol(test)"==String(h("test")),v=l(p.toString),y=l(p.valueOf),_=/^Symbol\((.*)\)[^)]+$/,k=l("".replace),w=l("".slice);d(p,"description",{configurable:!0,get:function(){var e=y(this),t=v(e);if(o(g,e))return"";var r=m?w(t,7,-1):k(t,_,"$1");return""===r?void 0:r}}),a({global:!0,forced:!0},{Symbol:b})}},2165:function(e,t,r){var a=r(7235);a("iterator")},3948:function(e,t,r){var a=r(7854),n=r(8324),i=r(8509),l=r(6992),o=r(8880),s=r(5112),c=s("iterator"),u=s("toStringTag"),d=l.values,f=function(e,t){if(e){if(e[c]!==d)try{o(e,c,d)}catch(a){e[c]=d}if(e[u]||o(e,u,t),n[t])for(var r in l)if(e[r]!==l[r])try{o(e,r,l[r])}catch(a){e[r]=l[r]}}};for(var h in n)f(a[h]&&a[h].prototype,h);f(i,"DOMTokenList")},9726:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});r(2526),r(1817),r(1539),r(2165),r(8783),r(3948);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}}}]);
//# sourceMappingURL=891-legacy.d0d0400d.js.map