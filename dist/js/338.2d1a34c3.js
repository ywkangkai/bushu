"use strict";(self["webpackChunkvue_admin"]=self["webpackChunkvue_admin"]||[]).push([[338],{6338:function(e,t,n){n.r(t),n.d(t,{default:function(){return u}});var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"table"},[n("div",{staticClass:"crumbs"},[n("el-breadcrumb",{attrs:{separator:"/"}},[n("el-breadcrumb-item",[n("i",{staticClass:"el-icon-lx-calendar"}),e._v(" 接口管理")]),n("el-breadcrumb-item",[e._v("接口列表")])],1)],1),n("div",{staticClass:"container"},[n("div",{staticClass:"handle-box"},[n("el-button",{staticClass:"handle-del mr10",attrs:{type:"primary",icon:"el-icon-delete"},on:{click:e.delAll}},[e._v("批量删除")]),n("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"输入筛选关键词"},model:{value:e.select_word,callback:function(t){e.select_word=t},expression:"select_word"}}),n("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")])],1),n("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.tableData,border:"",stripe:""},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),n("el-table-column",{attrs:{type:"index",label:"序号",width:"55",align:"center"}}),n("el-table-column",{attrs:{prop:"name",label:"接口名称",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-popover",{attrs:{trigger:"hover",placement:"top"}},[n("p",[e._v("接口名: "+e._s(t.row.name))]),n("p",[e._v("用例数: "+e._s(t.row.testcases))]),n("p",[e._v("配置数: "+e._s(t.row.configures))]),n("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[n("el-tag",{attrs:{size:"medium"}},[e._v(e._s(t.row.name))])],1)])]}}])}),n("el-table-column",{attrs:{prop:"desc",label:"描述",width:"100",align:"center"}}),n("el-table-column",{attrs:{prop:"tester",label:"测试人员",width:"100",align:"center"}}),n("el-table-column",{attrs:{prop:"project",label:"所属项目",width:"250"}}),n("el-table-column",{attrs:{prop:"create_time",label:"创建时间",sortable:"",align:"center"}}),n("el-table-column",{attrs:{prop:"update_time",label:"更新时间",sortable:"",align:"center"}}),n("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(n){return e.handleRun(t.$index,t.row)}}},[e._v("运行")]),n("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(n){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),n("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(n){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),n("div",{staticClass:"pagination"},[n("el-pagination",{attrs:{background:"","page-sizes":[4,5,8,10,20],layout:"total, sizes, prev, pager, next, jumper",total:e.total_nums,"page-size":e.page_size},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})],1)],1),n("el-dialog",{attrs:{title:"编辑接口",visible:e.editVisible,width:"30%",center:""},on:{"update:visible":function(t){e.editVisible=t}}},[n("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px"}},[n("el-form-item",{attrs:{label:"接口名称"}},[n("el-input",{attrs:{clearable:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),n("el-form-item",{attrs:{label:"测试人员"}},[n("el-input",{attrs:{clearable:""},model:{value:e.form.tester,callback:function(t){e.$set(e.form,"tester",t)},expression:"form.tester"}})],1),n("el-form-item",{attrs:{label:"所属项目"}},[n("el-input",{attrs:{disabled:""},model:{value:e.form.project,callback:function(t){e.$set(e.form,"project",t)},expression:"form.project"}})],1),n("el-form-item",{attrs:{label:"简要描述"}},[n("el-input",{attrs:{clearable:""},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.editVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.saveEdit}},[e._v("确 定")])],1)],1),n("el-dialog",{attrs:{title:"删除接口",visible:e.delVisible,width:"300px",center:""},on:{"update:visible":function(t){e.delVisible=t}}},[n("div",{staticClass:"del-dialog-cnt"},[e._v("删除不可恢复，是否确定删除？")]),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.delVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.deleteRow}},[e._v("确 定")])],1)]),n("el-dialog",{attrs:{title:"运行接口",visible:e.runVisible,width:"30%",center:""},on:{"update:visible":function(t){e.runVisible=t}}},[n("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px"}},[n("el-form-item",{attrs:{label:"运行环境"}},[n("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.env_id,callback:function(t){e.env_id=t},expression:"env_id"}},e._l(e.envs_id_names,(function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.runVisible=!1}}},[e._v("取 消")]),n("el-button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{type:"primary"},on:{click:e.openFullScreen1}},[e._v("运行")])],1)],1)],1)},r=[],s=n(2552),a={name:"basetable",data(){return{tableData:[],cur_page:1,page_size:10,total_nums:1,multipleSelection:[],select_word:"",del_list:[],editVisible:!1,delVisible:!1,runVisible:!1,form:{},project_idx:-1,project_id:-1,idx:-1,id:-1,env_id:"",envs_id_names:[],fullscreenLoading:!1}},created(){this.getData(),this.getEnvsIdNames()},methods:{handleCurrentChange(e){this.cur_page=e,this.getData()},handleSizeChange(e){this.page_size=e,this.getData()},getData(){(0,s.FP)({page:this.cur_page,size:this.page_size}).then((e=>{this.tableData=e.data.results,this.cur_page=e.data.current_page_num||1,this.total_nums=e.data.count||1}))},search(){(0,s.Zf)({name:this.select_word}).then((e=>{this.tableData=e.data.results}))},formatter(e,t){return e.address},filterTag(e,t){return t.tag===e},handleEdit(e,t){this.idx=e,this.id=t.id,this.form={...t},this.editVisible=!0},handleRun(e,t){this.idx=e,this.id=t.id,this.form=t,this.runVisible=!0},handleDelete(e,t){this.idx=e,this.id=t.id,this.delVisible=!0},delAll(){(0,s.AZ)({idlist:this.del_list}).then((e=>{this.$message.success("删除成功"),this.tableData=e.data.results})).catch((e=>{this.$message.error("服务器错误")}))},handleSelectionChange(e){let t=e,n=[];for(var i=0;i<t.length;i++)n.push(t[i]["id"]);this.del_list=n},async saveEdit(){var e=Object.assign({},this.form);delete e.project;let t=await(0,s.WD)(this.id,e);try{t.data.hasOwnProperty("name")?this.$message.error("接口名称已存在"):(this.$message.success("修改成功"),this.tableData=t.data.results,this.editVisible=!1)}catch(n){this.editVisible=!1,this.$message.error("服务器错误")}},deleteRow(){(0,s.nq)(this.id).then((e=>{this.$message.success("删除成功"),this.delVisible=!1,this.tableData=e.data.results,this.cur_page=e.data.current_page_num||1,this.total_nums=e.data.count||1})).catch((e=>{this.$message.error("服务器错误")}))},getEnvsIdNames(){(0,s.PT)().then((e=>{this.envs_id_names=e.data})).catch((e=>{this.$message.error("服务器错误")}))},open(e){this.$confirm("用例执行完成，是否前往查看报告?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.$router.push({path:`/reports_view/${e.data.id}`})})).catch((()=>{}))},async openFullScreen1(){if(""===this.env_id)this.$message.error("请选择运行环境");else{this.runVisible=!1,this.fullscreenLoading=!0;let e=await(0,s.tK)({iid:this.id,env_id:this.env_id});if(console.log(e),"当前接口不存在用例无法运行"===e.data.message)return console.log("xxxxxxxxxxxxxx"),this.fullscreenLoading=!1,void this.$message.error("当前接口未添加用例无法执行");e.status,this.fullscreenLoading=!1,this.open(e)}}}},l=a,o=n(1001),c=(0,o.Z)(l,i,r,!1,null,"5bd8f1a4",null),u=c.exports},2552:function(e,t,n){n.d(t,{$8:function(){return te},$q:function(){return B},AH:function(){return le},AZ:function(){return v},B:function(){return d},Bx:function(){return Z},Cs:function(){return U},DC:function(){return T},Dr:function(){return ue},FP:function(){return m},G3:function(){return X},GL:function(){return de},GW:function(){return _e},IG:function(){return h},KL:function(){return ne},Kh:function(){return $e},Kq:function(){return ve},L$:function(){return u},LO:function(){return w},Lu:function(){return Y},NM:function(){return se},NV:function(){return o},NW:function(){return D},OM:function(){return ee},PT:function(){return x},QG:function(){return ze},RB:function(){return L},RD:function(){return we},RQ:function(){return V},Sp:function(){return me},TR:function(){return J},Tg:function(){return oe},Tj:function(){return he},Vx:function(){return A},W7:function(){return Q},WD:function(){return b},XC:function(){return P},Z4:function(){return G},ZH:function(){return O},Zf:function(){return _},_X:function(){return f},ah:function(){return re},aj:function(){return k},ay:function(){return S},cQ:function(){return xe},cu:function(){return fe},d9:function(){return a},ei:function(){return ae},iO:function(){return z},ie:function(){return C},in:function(){return F},jJ:function(){return g},jh:function(){return be},kJ:function(){return pe},kq:function(){return M},lO:function(){return ke},n:function(){return p},nL:function(){return j},nk:function(){return E},nq:function(){return $},ny:function(){return q},o:function(){return R},pU:function(){return I},pW:function(){return ge},s2:function(){return ce},tK:function(){return y},tc:function(){return ye},th:function(){return c},vi:function(){return ie},vj:function(){return W},x4:function(){return l},xQ:function(){return N},yr:function(){return K},z:function(){return H}});var i=n(4206),r=n.n(i);let s="http://kk.uoyo.net:8080";const a=e=>r().get(`${s}/project/list/?page=`+e.page+"&size="+e.size,e),l=e=>r().post(`${s}/project/detail/`,e),o=(e,t)=>r().put(`${s}/project/edit/`+e+"/",t),c=e=>r()["delete"](`${s}/project/delete/`+e+"/"),u=e=>r().post(`${s}/project/deleteall/`,e),d=e=>r().post(`${s}/project/add/`,e),p=()=>r().get(`${s}/interface/project/name`),f=()=>r().get(`${s}/project/get/env/`),g=e=>r().post(`${s}/project/run/`,e),h=e=>r().post(`${s}/interface/add/`,e),m=e=>r().get(`${s}/interface/list/?page=`+e.page+"&size="+e.size,e),b=(e,t)=>r().put(`${s}/interface/edit/`+e+"/",t),$=e=>r()["delete"](`${s}/interface/delete/`+e+"/"),v=e=>r().post(`${s}/interface/deleteall/`,e),_=e=>r().post(`${s}/interface/detail/`,e),x=()=>r().get(`${s}/interface/env/`),y=e=>r().post(`${s}/interface/run/`,e),k=e=>r().get(`${s}/env/list/?page=`+e.page+"&size="+e.size,e),w=(e,t)=>r().put(`${s}/env/edit/`+e+"/",t),z=e=>r()["delete"](`${s}/env/delete/`+e+"/"),C=e=>r().post(`${s}/env/add/`,e),j=e=>r().post(`${s}/env/detail/`,e),V=e=>r().post(`${s}/env/deleteall/`,e),D=e=>r().get(`${s}/debugtalk/list/?page=`+e.page+"&size="+e.size,e),L=e=>r().post(`${s}/debugtalk/detail/`,e),S=e=>r().get(`${s}/debugtalk/code/`+e+"/"),T=e=>r().put(`${s}/debugtalk/update/`,e),R=()=>r().get(`${s}/config/project/name/`),E=e=>r().post(`${s}/config/interface/name/`,e),Z=e=>r().post(`${s}/config/save/`,e),N=e=>r().get(`${s}/config/list/?page=`+e.page+"&size="+e.size,e),O=e=>r().post(`${s}/config/detail/`,e),W=e=>r()["delete"](`${s}/config/delete/`+e+"/"),q=e=>r().post(`${s}/config/deleteall/`,e),A=e=>r().get(`${s}/config/detail/`+e+"/"),B=(e,t)=>r().put(`${s}/config/update/`+e+"/",t),G=()=>r().get(`${s}/testsuite/project/name/`),K=e=>r().post(`${s}/testsuite/interface/name/`,e),P=e=>r().post(`${s}/testsuite/add/`,e),F=e=>r().get(`${s}/testsuite/list/?page=`+e.page+"&size="+e.size,e),Q=e=>r().post(`${s}/testsuite/detail/`,e),I=e=>r().get(`${s}/testsuite/detail/`+e+"/"),H=(e,t)=>r().put(`${s}/testsuite/update/`+e+"/",t),J=e=>r().post(`${s}/testsuite/deleteall/`,e),M=e=>r()["delete"](`${s}/testsuite/delete/`+e+"/"),X=()=>r().get(`${s}/testcase/project/name/`),U=e=>r().post(`${s}/testcase/interface/name/`,e),Y=e=>r().post(`${s}/testcase/configure/name/`,e),ee=e=>r().post(`${s}/testcase/name/`,e),te=e=>r().post(`${s}/testcase/add/`,e),ne=e=>r().get(`${s}/testcase/list/?page=`+e.page+"&size="+e.size),ie=e=>r().post(`${s}/testcase/detail/`,e),re=e=>r()["delete"](`${s}/testcase/delete/`+e+"/"),se=e=>r().post(`${s}/testcase/deleteall/`,e),ae=e=>r().get(`${s}/testcase/get/detail/`+e+"/"),le=e=>r().put(`${s}/testcase/update/`,e),oe=()=>r().get(`${s}/testcase/get/env/`),ce=e=>r().post(`${s}/testcase/run/`,e),ue=e=>r().get(`${s}/report/list/?page=`+e.page+"&size="+e.size),de=e=>r().get(`${s}/report/view/`+e+"/"),pe=e=>r().post(`${s}/report/download/`+e+"/"),fe=e=>r()["delete"](`${s}/report/delete/`+e+"/"),ge=e=>r().post(`${s}/report/deleteall/`,e),he=e=>r().post(`${s}/report/open/`,e),me=()=>r().get(`${s}/summary/data/`),be=e=>r().post(`${s}/repository/add/`,e),$e=e=>r().get(`${s}/repository/list/?page=`+e.page+"&size="+e.size),ve=e=>r().post(`${s}/repository/detail/`,e),_e=e=>r().put(`${s}/repository/update/`,e),xe=e=>r()["delete"](`${s}/repository/delete/`+e+"/"),ye=e=>r().post(`${s}/repository/deleteall/`,e),ke=e=>r().post(`${s}/repository/search/`,e),we=e=>r().post(`${s}/repository/git/`,e),ze=e=>r().post(`${s}/repository/compile/`,e)}}]);
//# sourceMappingURL=338.2d1a34c3.js.map