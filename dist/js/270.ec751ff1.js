"use strict";(self["webpackChunkvue_admin"]=self["webpackChunkvue_admin"]||[]).push([[270],{2270:function(e,t,a){a.r(t),a.d(t,{default:function(){return c}});var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-lx-calendar"}),e._v(" 配置管理")]),a("el-breadcrumb-item",[e._v("新增配置")])],1)],1),a("div",{staticClass:"container"},[a("el-tabs",{attrs:{type:"border-card"}},[a("el-tab-pane",{attrs:{label:"请求头|全局变量"}},[a("el-tabs",{staticStyle:{margin:"0 0 0 10px"},model:{value:e.otherShow,callback:function(t){e.otherShow=t},expression:"otherShow"}},[a("el-tab-pane",{attrs:{label:"Headers",name:"first"}},[a("el-table",{staticClass:"h-b-e-a-style",attrs:{data:e.apiMsgData.header,size:"mini",stripe:"","show-header":!1,"row-style":{"background-color":"rgb(250, 250, 250)"}}},[a("el-table-column",{attrs:{property:"key",label:"Key","header-align":"center",minWidth:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini",placeholder:"key"},model:{value:t.row.key,callback:function(a){e.$set(t.row,"key",a)},expression:"scope.row.key"}})]}}])}),a("el-table-column",{attrs:{property:"value",label:"Value","header-align":"center",minWidth:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini",placeholder:"value"},model:{value:t.row.value,callback:function(a){e.$set(t.row,"value",a)},expression:"scope.row.value"}})]}}])}),a("el-table-column",{attrs:{property:"value",label:"操作","header-align":"center",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},nativeOn:{click:function(a){return e.delTableRow("header",t.$index)}}})]}}])})],1)],1),a("el-tab-pane",{attrs:{label:"全局变量",name:"second"}},[a("el-table",{staticClass:"h-b-e-a-style",attrs:{data:e.apiMsgData.globalVar,size:"mini",stripe:"","show-header":!1,"row-style":{"background-color":"rgb(250, 250, 250)"}}},[a("el-table-column",{attrs:{property:"key",label:"Key","header-align":"center",minWidth:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini",placeholder:"key"},model:{value:t.row.key,callback:function(a){e.$set(t.row,"key",a)},expression:"scope.row.key"}})]}}])}),a("el-table-column",{attrs:{label:"type","header-align":"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{size:"mini"},model:{value:t.row.param_type,callback:function(a){e.$set(t.row,"param_type",a)},expression:"scope.row.param_type"}},e._l(e.paramTypes,(function(e){return a("el-option",{key:e,attrs:{value:e}})})),1)]}}])}),a("el-table-column",{attrs:{property:"value",label:"Value","header-align":"center",minWidth:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini",placeholder:"value"},model:{value:t.row.value,callback:function(a){e.$set(t.row,"value",a)},expression:"scope.row.value"}})]}}])}),a("el-table-column",{attrs:{property:"value",label:"操作","header-align":"center",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},nativeOn:{click:function(a){return e.delTableRow("globalVar",t.$index)}}})]}}])})],1)],1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSubmit()}}},[e._v("提交")])],1),a("el-col",{attrs:{span:2}},[a("el-button",{on:{click:function(t){return e.resetForm("form")}}},[e._v("取消")])],1)],1)],1),a("el-dialog",{attrs:{title:"创建配置",visible:e.editVisible,width:"28%",center:""},on:{"update:visible":function(t){e.editVisible=t}}},[a("el-form",{attrs:{"label-width":"120px"}},[a("el-form-item",{attrs:{label:"配置名称"}},[a("el-input",{attrs:{clearable:""},model:{value:e.configure_name,callback:function(t){e.configure_name=t},expression:"configure_name"}})],1),a("el-form-item",{attrs:{label:"编写人员"}},[a("el-input",{attrs:{clearable:""},model:{value:e.author,callback:function(t){e.author=t},expression:"author"}})],1),a("el-form-item",{attrs:{label:"选择项目"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:function(t){return e.getInterfacesByProjectID(e.selected_project_id)}},model:{value:e.selected_project_id,callback:function(t){e.selected_project_id=t},expression:"selected_project_id"}},e._l(e.project_names,(function(e,t){return a("el-option",{key:t,attrs:{label:e.projectname,value:e.id}})})),1)],1),a("el-form-item",{attrs:{label:"选择接口"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.selected_interface_id,callback:function(t){e.selected_interface_id=t},expression:"selected_interface_id"}},e._l(e.interfaces,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.saveEdit}},[e._v("确 定")])],1)],1)],1)},n=[],i=a(2552),l={name:"baseform",data:function(){return{editVisible:!1,apiMsgData:{id:null,name:"",header:[{key:null,value:null}],globalVar:[{key:null,value:null,param_type:"string"}]},bodyShow:"second",otherShow:"first",paramTypes:["string","int","float","boolean"],cell:Object(),project_names:[],selected_project_id:null,selected_interface_id:null,selected_configure_id:null,configure_name:null,author:"",interfaces:[],configures:[]}},created(){this.getProjectNames()},methods:{onSubmit(){this.selected_project_id=null,this.selected_interface_id=null,this.editVisible=!0},handleData1(e,t){let a=[];for(let r=0;r<e.length;r++){let n=e[r].key;if(!n)return this.$message.error(t+"的key为空!"),[];let i=e[r].param_type,l=e[r].value;if("int"===i){if(!/^\d+$/.test(l))return this.$message.error(n+"不是整数int类型!"),[];l=Number(l)}else if("float"===i){if(!/^[+-]?\d+(\.\d+)?$/.test(l))return this.$message.error(n+"不是小数float类型!"),[];l=Number(l)}else if("boolean"===i)if(/^(true|True|TRUE|1)$/.test(l))l=!0;else{if(!/^(false|False|FALSE|0)$/.test(l))return this.$message.error(n+"不是布尔boolean类型!"),[];l=!1}let s={};s[n]=l,a.push(s)}return a},handleData2(e,t){let a={};for(let r=0;r<e.length;r++){let n=e[r].key;if(!n)return this.$message.error(t),[];a[n]=e[r].value}return a},saveEdit(){if(null===this.configure_name)return void this.$message.error("配置名称不能为空!");if(""===this.author)return void this.$message.error("编写人员名称不能为空!");if(null===this.selected_project_id||null===this.selected_interface_id)return void this.$message.error("未选择所属项目或者接口!");let e={name:this.configure_name,interface:{pid:this.selected_project_id,iid:this.selected_interface_id},author:this.author,request:{config:{name:this.configure_name,request:{}}}},t=this.apiMsgData.globalVar;if(t.splice(-1,1),0!==t.length){let a=this.handleData1(t,"全局变量key值不能为空，请检查参数");if(0===a.length)return;e.request.config["variables"]=a}let a=this.apiMsgData.header;if(a.splice(-1,1),0!==a.length){let t=this.handleData2(a,"请求头header");if(0===t.length)return;e.request.config.request["headers"]=t}e.request=JSON.stringify(e.request),(0,i.Bx)(e).then((e=>{let t=this;e.data.hasOwnProperty("name")?this.$message.error("配置名称已存在"):(this.editVisible=!1,this.$message.success("新增配置成功"),setInterval((function(){t.$router.go()}),1e3))})).catch((e=>{this.editVisible=!1,this.$message.error("服务器错误")}))},getProjectNames(){(0,i.o)().then((e=>{this.project_names=e.data.data})).catch((e=>{this.$message.error("服务器错误")}))},getInterfacesByProjectID(e){(0,i.nk)({id:e}).then((e=>{this.interfaces=e.data.data})).catch((e=>{that.$message.error("服务器错误")}))},getConfTestcaseByInterfaceID(e){(0,i.Lu)(e).then((e=>{this.configures=e.data})).catch((e=>{that.$message.error("服务器错误")}))},delTableRow(e,t){"variable"===e?this.apiMsgData.variable.splice(t,1):"header"===e?(console.log(this.apiMsgData.header),this.apiMsgData.header.splice(t,1)):"param"===e?this.apiMsgData.param.splice(t,1):"globalVar"===e?this.apiMsgData.globalVar.splice(t,1):"parameterized"===e?this.apiMsgData.parameterized.splice(t,1):"setupHooks"===e?this.apiMsgData.setupHooks.splice(t,1):"teardownHooks"===e&&this.apiMsgData.teardownHooks.splice(t,1)},addTableRow(e){"variable"===e?this.apiMsgData.variable.push({key:null,value:null,param_type:"string"}):"header"===e?this.apiMsgData.header.push({key:null,value:null}):"param"===e?this.apiMsgData.param.push({key:null,value:null}):"globalVar"===e?this.apiMsgData.globalVar.push({key:null,value:null,param_type:"string"}):"parameterized"===e?this.apiMsgData.parameterized.push({key:null,value:null}):"setupHooks"===e?this.apiMsgData.setupHooks.push({key:null}):"teardownHooks"===e&&this.apiMsgData.teardownHooks.push({key:null})},tempNum(e){this.temp_num=e},resetLine(){this.cell.style.height="18px"},showLine(e,t){this.cell=document.getElementById(e+t),this.cell.style.height=this.cell.scrollHeight+"px"},changeLine(){if(this.cell.style.height!==this.cell.scrollHeight+"px"){let e=parseInt(this.cell.style.height.substring(0,this.cell.style.height.length-2));e-this.cell.scrollHeight===2?this.cell.style.height=e-18+"px":this.cell.style.height=this.cell.scrollHeight+"px"}},querySearch(e,t){t(this.comparators)}},computed:{monitorHeader(){return this.apiMsgData.header},monitorGlobalVar(){return this.apiMsgData.globalVar}},watch:{monitorHeader:{handler:function(){0===this.apiMsgData.header.length&&this.addTableRow("header"),(this.apiMsgData.header[this.apiMsgData.header.length-1]["key"]||this.apiMsgData.header[this.apiMsgData.header.length-1]["value"])&&this.addTableRow("header")},deep:!0},monitorGlobalVar:{handler:function(){0===this.apiMsgData.globalVar.length&&this.addTableRow("globalVar"),(this.apiMsgData.globalVar[this.apiMsgData.globalVar.length-1]["key"]||this.apiMsgData.globalVar[this.apiMsgData.globalVar.length-1]["value"])&&this.addTableRow("globalVar")},deep:!0}}},s=l,o=a(1001),u=(0,o.Z)(s,r,n,!1,null,"79267647",null),c=u.exports},2552:function(e,t,a){a.d(t,{$8:function(){return te},$q:function(){return B},AH:function(){return se},AZ:function(){return y},B:function(){return p},Bx:function(){return C},Cs:function(){return X},DC:function(){return T},Dr:function(){return ce},FP:function(){return m},G3:function(){return U},GL:function(){return pe},GW:function(){return ve},IG:function(){return g},KL:function(){return ae},Kh:function(){return $e},Kq:function(){return ye},L$:function(){return c},LO:function(){return D},Lu:function(){return Y},NM:function(){return ie},NV:function(){return o},NW:function(){return x},OM:function(){return ee},PT:function(){return k},QG:function(){return je},RB:function(){return S},RD:function(){return De},RQ:function(){return V},Sp:function(){return me},TR:function(){return A},Tg:function(){return oe},Tj:function(){return ge},Vx:function(){return W},W7:function(){return Z},WD:function(){return b},XC:function(){return E},Z4:function(){return G},ZH:function(){return I},Zf:function(){return v},_X:function(){return h},ah:function(){return ne},aj:function(){return w},ay:function(){return H},cQ:function(){return ke},cu:function(){return he},d9:function(){return l},ei:function(){return le},iO:function(){return j},ie:function(){return M},in:function(){return K},jJ:function(){return f},jh:function(){return be},kJ:function(){return de},kq:function(){return J},lO:function(){return we},n:function(){return d},nL:function(){return z},nk:function(){return q},nq:function(){return $},ny:function(){return O},o:function(){return R},pU:function(){return F},pW:function(){return fe},s2:function(){return ue},tK:function(){return _},tc:function(){return _e},th:function(){return u},vi:function(){return re},vj:function(){return N},x4:function(){return s},xQ:function(){return L},yr:function(){return P},z:function(){return Q}});var r=a(4206),n=a.n(r);let i="http://kk.uoyo.net:8080";const l=e=>n().get(`${i}/project/list/?page=`+e.page+"&size="+e.size,e),s=e=>n().post(`${i}/project/detail/`,e),o=(e,t)=>n().put(`${i}/project/edit/`+e+"/",t),u=e=>n()["delete"](`${i}/project/delete/`+e+"/"),c=e=>n().post(`${i}/project/deleteall/`,e),p=e=>n().post(`${i}/project/add/`,e),d=()=>n().get(`${i}/interface/project/name`),h=()=>n().get(`${i}/project/get/env/`),f=e=>n().post(`${i}/project/run/`,e),g=e=>n().post(`${i}/interface/add/`,e),m=e=>n().get(`${i}/interface/list/?page=`+e.page+"&size="+e.size,e),b=(e,t)=>n().put(`${i}/interface/edit/`+e+"/",t),$=e=>n()["delete"](`${i}/interface/delete/`+e+"/"),y=e=>n().post(`${i}/interface/deleteall/`,e),v=e=>n().post(`${i}/interface/detail/`,e),k=()=>n().get(`${i}/interface/env/`),_=e=>n().post(`${i}/interface/run/`,e),w=e=>n().get(`${i}/env/list/?page=`+e.page+"&size="+e.size,e),D=(e,t)=>n().put(`${i}/env/edit/`+e+"/",t),j=e=>n()["delete"](`${i}/env/delete/`+e+"/"),M=e=>n().post(`${i}/env/add/`,e),z=e=>n().post(`${i}/env/detail/`,e),V=e=>n().post(`${i}/env/deleteall/`,e),x=e=>n().get(`${i}/debugtalk/list/?page=`+e.page+"&size="+e.size,e),S=e=>n().post(`${i}/debugtalk/detail/`,e),H=e=>n().get(`${i}/debugtalk/code/`+e+"/"),T=e=>n().put(`${i}/debugtalk/update/`,e),R=()=>n().get(`${i}/config/project/name/`),q=e=>n().post(`${i}/config/interface/name/`,e),C=e=>n().post(`${i}/config/save/`,e),L=e=>n().get(`${i}/config/list/?page=`+e.page+"&size="+e.size,e),I=e=>n().post(`${i}/config/detail/`,e),N=e=>n()["delete"](`${i}/config/delete/`+e+"/"),O=e=>n().post(`${i}/config/deleteall/`,e),W=e=>n().get(`${i}/config/detail/`+e+"/"),B=(e,t)=>n().put(`${i}/config/update/`+e+"/",t),G=()=>n().get(`${i}/testsuite/project/name/`),P=e=>n().post(`${i}/testsuite/interface/name/`,e),E=e=>n().post(`${i}/testsuite/add/`,e),K=e=>n().get(`${i}/testsuite/list/?page=`+e.page+"&size="+e.size,e),Z=e=>n().post(`${i}/testsuite/detail/`,e),F=e=>n().get(`${i}/testsuite/detail/`+e+"/"),Q=(e,t)=>n().put(`${i}/testsuite/update/`+e+"/",t),A=e=>n().post(`${i}/testsuite/deleteall/`,e),J=e=>n()["delete"](`${i}/testsuite/delete/`+e+"/"),U=()=>n().get(`${i}/testcase/project/name/`),X=e=>n().post(`${i}/testcase/interface/name/`,e),Y=e=>n().post(`${i}/testcase/configure/name/`,e),ee=e=>n().post(`${i}/testcase/name/`,e),te=e=>n().post(`${i}/testcase/add/`,e),ae=e=>n().get(`${i}/testcase/list/?page=`+e.page+"&size="+e.size),re=e=>n().post(`${i}/testcase/detail/`,e),ne=e=>n()["delete"](`${i}/testcase/delete/`+e+"/"),ie=e=>n().post(`${i}/testcase/deleteall/`,e),le=e=>n().get(`${i}/testcase/get/detail/`+e+"/"),se=e=>n().put(`${i}/testcase/update/`,e),oe=()=>n().get(`${i}/testcase/get/env/`),ue=e=>n().post(`${i}/testcase/run/`,e),ce=e=>n().get(`${i}/report/list/?page=`+e.page+"&size="+e.size),pe=e=>n().get(`${i}/report/view/`+e+"/"),de=e=>n().post(`${i}/report/download/`+e+"/"),he=e=>n()["delete"](`${i}/report/delete/`+e+"/"),fe=e=>n().post(`${i}/report/deleteall/`,e),ge=e=>n().post(`${i}/report/open/`,e),me=()=>n().get(`${i}/summary/data/`),be=e=>n().post(`${i}/repository/add/`,e),$e=e=>n().get(`${i}/repository/list/?page=`+e.page+"&size="+e.size),ye=e=>n().post(`${i}/repository/detail/`,e),ve=e=>n().put(`${i}/repository/update/`,e),ke=e=>n()["delete"](`${i}/repository/delete/`+e+"/"),_e=e=>n().post(`${i}/repository/deleteall/`,e),we=e=>n().post(`${i}/repository/search/`,e),De=e=>n().post(`${i}/repository/git/`,e),je=e=>n().post(`${i}/repository/compile/`,e)}}]);
//# sourceMappingURL=270.ec751ff1.js.map