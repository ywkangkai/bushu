(self["webpackChunkvue_admin"]=self["webpackChunkvue_admin"]||[]).push([[563],{4563:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return m}});var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"crumbs"},[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",[r("i",{staticClass:"el-icon-lx-calendar"}),t._v(" 套件管理")]),r("el-breadcrumb-item",[t._v("编辑套件")])],1)],1),r("div",{staticClass:"container"},[r("div",{staticClass:"form-box"},[r("el-form",{ref:"form",attrs:{rules:t.rules,model:t.form,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"套件名称",prop:"name"}},[r("el-input",{attrs:{"suffix-icon":"el-icon-menu",clearable:""},on:{focus:function(e){return t.clearValidate("name")}},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),r("el-form-item",{attrs:{label:"选择项目",prop:"project_id"}},[r("el-select",{attrs:{placeholder:"请选择"},on:{change:function(e){return t.getInterfacesByProjectID(t.form.project_id)}},model:{value:t.form.project_id,callback:function(e){t.$set(t.form,"project_id",e)},expression:"form.project_id"}},t._l(t.project_names,(function(t,e){return r("el-option",{key:e,attrs:{label:t.projectname,value:t.id}})})),1)],1),r("el-form-item",{attrs:{label:"选择接口"}},[r("div",{staticClass:"drag-box"},[r("div",{staticClass:"drag-box-item"},[r("div",{staticClass:"item-title"},[t._v("待选接口")]),r("draggable",{attrs:{options:t.dragOptions},on:{change:function(e){return t.unchangeResult()}},model:{value:t.unselected,callback:function(e){t.unselected=e},expression:"unselected"}},[r("transition-group",{staticClass:"item-ul",attrs:{tag:"div"}},t._l(t.unselected,(function(e){return r("div",{key:e.id,staticClass:"drag-list"},[t._v(" "+t._s(e.name)+" ")])})),0)],1)],1),r("div",{staticClass:"drag-box-item"},[r("div",{staticClass:"item-title"},[t._v("已选接口")]),r("draggable",{attrs:{options:t.dragOptions},on:{change:function(e){return t.changeResult()}},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},[r("transition-group",{staticClass:"item-ul",attrs:{tag:"div"}},t._l(t.selected,(function(e){return r("div",{key:e.id,staticClass:"drag-list"},[t._v(" "+t._s(e.name)+" ")])})),0)],1)],1)])]),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.onSubmit("form")}}},[t._v("提交")]),r("el-button",{on:{click:function(e){return t.resetForm("form")}}},[t._v("取消")])],1)],1)],1)])])},i=[],o=r(4479),a=(r(8862),r(4660),r(1539),r(4747),r(8309),r(561),r(4553),r(9980)),c=r.n(a),s=r(2552),u={beforeRouteUpdate:function(t,e,r){this.current_testsuite_id=t.params.id,this.getTestSuiteDetail(),r()},name:"baseform",data:function(){return{current_testsuite_id:null,form:{name:"",project_id:"",include:""},rules:{name:[{required:!0,message:"请输入套件名称",trigger:"blur"}],project_id:[{required:!0,message:"请选择所属项目",trigger:"blur"}]},project_names:[],dragOptions:{animation:120,scroll:!0,group:"sortlist",ghostClass:"ghost-style"},unselected:[],selected:[],selected_ids:"",unselected_ids:""}},components:{draggable:c()},created:function(){this.current_testsuite_id=this.$route.params.id,this.getProjectNames(),this.getTestSuiteDetail()},methods:{onSubmit:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return e.$message.error("参数有误"),!1;var r=e,n={include:e.selected_ids,uninclude:e.unselected_ids};e.form.include=JSON.stringify(n),(0,s.z)(e.current_testsuite_id,e.form).then((function(t){e.$message.success("修改套件成功！")})),r.$router.push("/testsuites_list").catch((function(t){t.response.data.hasOwnProperty("name")?e.$message.error("套件名称已存在"):e.$message.error("服务器错误")}))}))},clearValidate:function(t){this.$refs["form"].clearValidate(t)},resetForm:function(t){this.$refs[t].resetFields()},getProjectNames:function(){var t=this;(0,s.Z4)().then((function(e){t.project_names=e.data.data})).catch((function(t){that.$message.error("服务器错误")}))},removeHandle:function(t){console.log(t),this.$message.success("从 ".concat(t.from.id," 移动到 ").concat(t.to.id," "))},getInterfacesByProjectID:function(t){var e=this;(0,s.yr)({id:t}).then((function(t){var r=t.data.data;e.unselected=[].concat((0,o.Z)(r),(0,o.Z)(e.selected)),r.forEach((function(t){e.selected.forEach((function(r){t.name===r.name&&(e.unselected.splice(e.unselected.findIndex((function(e){return e.name===t.name})),1),e.unselected.splice(e.unselected.findIndex((function(t){return t.name===r.name})),1))}))}))})).catch((function(t){that.$message.error("服务器错误")}))},changeResult:function(){for(var t=this.selected.length,e="[",r=0;r<t;r++)e+=r===t-1?this.selected[r].id+"]":this.selected[r].id+", ";0===t&&(e="[]"),this.selected_ids=e},unchangeResult:function(){for(var t=this.unselected.length,e="[",r=0;r<t;r++)e+=r===t-1?this.unselected[r].id+"]":this.unselected[r].id+", ";0===t&&(e="[]"),this.unselected_ids=e},getTestSuiteDetail:function(){var t=this;(0,s.pU)(this.current_testsuite_id).then((function(e){console.log(e.data),t.form.name=e.data.name,t.form.project_id=e.data.project_id,t.getInterfacesByProjectID(t.form.project_id),t.selected=e.data.include})).catch((function(e){t.$message.error("服务器错误")}))}}},l=u,f=r(1001),d=(0,f.Z)(l,n,i,!1,null,"76057398",null),m=d.exports},8533:function(t,e,r){"use strict";var n=r(2092).forEach,i=r(9341),o=i("forEach");t.exports=o?[].forEach:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}},8457:function(t,e,r){"use strict";var n=r(7854),i=r(9974),o=r(6916),a=r(7908),c=r(3411),s=r(7659),u=r(4411),l=r(6244),f=r(6135),d=r(8554),m=r(1246),h=n.Array;t.exports=function(t){var e=a(t),r=u(this),n=arguments.length,v=n>1?arguments[1]:void 0,p=void 0!==v;p&&(v=i(v,n>2?arguments[2]:void 0));var g,y,b,_,x,E,S=m(e),j=0;if(!S||this==h&&s(S))for(g=l(e),y=r?new this(g):h(g);g>j;j++)E=p?v(e[j],j):e[j],f(y,j,E);else for(_=d(e,S),x=_.next,y=r?new this:[];!(b=o(x,_)).done;j++)E=p?c(_,v,[b.value,j],!0):b.value,f(y,j,E);return y.length=j,y}},9341:function(t,e,r){"use strict";var n=r(7293);t.exports=function(t,e){var r=[][t];return!!r&&n((function(){r.call(null,e||function(){return 1},1)}))}},3411:function(t,e,r){var n=r(9670),i=r(9212);t.exports=function(t,e,r,o){try{return o?e(n(r)[0],r[1]):e(r)}catch(a){i(t,"throw",a)}}},7741:function(t,e,r){var n=r(1702),i=n("".replace),o=function(t){return String(Error(t).stack)}("zxcasd"),a=/\n\s*at [^:]*:[^\n]*/,c=a.test(o);t.exports=function(t,e){if(c&&"string"==typeof t)while(e--)t=i(t,a,"");return t}},2914:function(t,e,r){var n=r(7293),i=r(9114);t.exports=!n((function(){var t=Error("a");return!("stack"in t)||(Object.defineProperty(t,"stack",i(1,7)),7!==t.stack)}))},9587:function(t,e,r){var n=r(614),i=r(111),o=r(7674);t.exports=function(t,e,r){var a,c;return o&&n(a=e.constructor)&&a!==r&&i(c=a.prototype)&&c!==r.prototype&&o(t,c),t}},8340:function(t,e,r){var n=r(111),i=r(8880);t.exports=function(t,e){n(e)&&"cause"in e&&i(t,"cause",e.cause)}},6277:function(t,e,r){var n=r(1340);t.exports=function(t,e){return void 0===t?arguments.length<2?"":e:n(t)}},9191:function(t,e,r){"use strict";var n=r(5005),i=r(2597),o=r(8880),a=r(7976),c=r(7674),s=r(9920),u=r(9587),l=r(6277),f=r(8340),d=r(7741),m=r(2914),h=r(1913);t.exports=function(t,e,r,v){var p=v?2:1,g=t.split("."),y=g[g.length-1],b=n.apply(null,g);if(b){var _=b.prototype;if(!h&&i(_,"cause")&&delete _.cause,!r)return b;var x=n("Error"),E=e((function(t,e){var r=l(v?e:t,void 0),n=v?new b(t):new b;return void 0!==r&&o(n,"message",r),m&&o(n,"stack",d(n.stack,2)),this&&a(_,this)&&u(n,this,E),arguments.length>p&&f(n,arguments[p]),n}));if(E.prototype=_,"Error"!==y&&(c?c(E,x):s(E,x,{name:!0})),s(E,b),!h)try{_.name!==y&&o(_,"name",y),_.constructor=E}catch(S){}return E}}},4660:function(t,e,r){"use strict";var n=r(2109),i=r(7854),o=r(7293),a=r(3157),c=r(111),s=r(7908),u=r(6244),l=r(6135),f=r(5417),d=r(1194),m=r(5112),h=r(7392),v=m("isConcatSpreadable"),p=9007199254740991,g="Maximum allowed index exceeded",y=i.TypeError,b=h>=51||!o((function(){var t=[];return t[v]=!1,t.concat()[0]!==t})),_=d("concat"),x=function(t){if(!c(t))return!1;var e=t[v];return void 0!==e?!!e:a(t)},E=!b||!_;n({target:"Array",proto:!0,forced:E},{concat:function(t){var e,r,n,i,o,a=s(this),c=f(a,0),d=0;for(e=-1,n=arguments.length;e<n;e++)if(o=-1===e?a:arguments[e],x(o)){if(i=u(o),d+i>p)throw y(g);for(r=0;r<i;r++,d++)r in o&&l(c,d,o[r])}else{if(d>=p)throw y(g);l(c,d++,o)}return c.length=d,c}})},4553:function(t,e,r){"use strict";var n=r(2109),i=r(2092).findIndex,o=r(1223),a="findIndex",c=!0;a in[]&&Array(1)[a]((function(){c=!1})),n({target:"Array",proto:!0,forced:c},{findIndex:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),o(a)},1038:function(t,e,r){var n=r(2109),i=r(8457),o=r(7072),a=!o((function(t){Array.from(t)}));n({target:"Array",stat:!0,forced:a},{from:i})},7042:function(t,e,r){"use strict";var n=r(2109),i=r(7854),o=r(3157),a=r(4411),c=r(111),s=r(1400),u=r(6244),l=r(5656),f=r(6135),d=r(5112),m=r(1194),h=r(206),v=m("slice"),p=d("species"),g=i.Array,y=Math.max;n({target:"Array",proto:!0,forced:!v},{slice:function(t,e){var r,n,i,d=l(this),m=u(d),v=s(t,m),b=s(void 0===e?m:e,m);if(o(d)&&(r=d.constructor,a(r)&&(r===g||o(r.prototype))?r=void 0:c(r)&&(r=r[p],null===r&&(r=void 0)),r===g||void 0===r))return h(d,v,b);for(n=new(void 0===r?g:r)(y(b-v,0)),i=0;v<b;v++,i++)v in d&&f(n,i,d[v]);return n.length=i,n}})},561:function(t,e,r){"use strict";var n=r(2109),i=r(7854),o=r(1400),a=r(9303),c=r(6244),s=r(7908),u=r(5417),l=r(6135),f=r(1194),d=f("splice"),m=i.TypeError,h=Math.max,v=Math.min,p=9007199254740991,g="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!d},{splice:function(t,e){var r,n,i,f,d,y,b=s(this),_=c(b),x=o(t,_),E=arguments.length;if(0===E?r=n=0:1===E?(r=0,n=_-x):(r=E-2,n=v(h(a(e),0),_-x)),_+r-n>p)throw m(g);for(i=u(b,n),f=0;f<n;f++)d=x+f,d in b&&l(i,f,b[d]);if(i.length=n,r<n){for(f=x;f<_-n;f++)d=f+n,y=f+r,d in b?b[y]=b[d]:delete b[y];for(f=_;f>_-n+r;f--)delete b[f-1]}else if(r>n)for(f=_-n;f>x;f--)d=f+n-1,y=f+r-1,d in b?b[y]=b[d]:delete b[y];for(f=0;f<r;f++)b[f+x]=arguments[f+2];return b.length=_-n+r,i}})},1703:function(t,e,r){var n=r(2109),i=r(7854),o=r(2104),a=r(9191),c="WebAssembly",s=i[c],u=7!==Error("e",{cause:7}).cause,l=function(t,e){var r={};r[t]=a(t,e,u),n({global:!0,forced:u},r)},f=function(t,e){if(s&&s[t]){var r={};r[t]=a(c+"."+t,e,u),n({target:c,stat:!0,forced:u},r)}};l("Error",(function(t){return function(e){return o(t,this,arguments)}})),l("EvalError",(function(t){return function(e){return o(t,this,arguments)}})),l("RangeError",(function(t){return function(e){return o(t,this,arguments)}})),l("ReferenceError",(function(t){return function(e){return o(t,this,arguments)}})),l("SyntaxError",(function(t){return function(e){return o(t,this,arguments)}})),l("TypeError",(function(t){return function(e){return o(t,this,arguments)}})),l("URIError",(function(t){return function(e){return o(t,this,arguments)}})),f("CompileError",(function(t){return function(e){return o(t,this,arguments)}})),f("LinkError",(function(t){return function(e){return o(t,this,arguments)}})),f("RuntimeError",(function(t){return function(e){return o(t,this,arguments)}}))},8783:function(t,e,r){"use strict";var n=r(8710).charAt,i=r(1340),o=r(9909),a=r(654),c="String Iterator",s=o.set,u=o.getterFor(c);a(String,"String",(function(t){s(this,{type:c,string:i(t),index:0})}),(function(){var t,e=u(this),r=e.string,i=e.index;return i>=r.length?{value:void 0,done:!0}:(t=n(r,i),e.index+=t.length,{value:t,done:!1})}))},1817:function(t,e,r){"use strict";var n=r(2109),i=r(9781),o=r(7854),a=r(1702),c=r(2597),s=r(614),u=r(7976),l=r(1340),f=r(3070).f,d=r(9920),m=o.Symbol,h=m&&m.prototype;if(i&&s(m)&&(!("description"in h)||void 0!==m().description)){var v={},p=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:l(arguments[0]),e=u(h,this)?new m(t):void 0===t?m():m(t);return""===t&&(v[e]=!0),e};d(p,m),p.prototype=h,h.constructor=p;var g="Symbol(test)"==String(m("test")),y=a(h.toString),b=a(h.valueOf),_=/^Symbol\((.*)\)[^)]+$/,x=a("".replace),E=a("".slice);f(h,"description",{configurable:!0,get:function(){var t=b(this),e=y(t);if(c(v,t))return"";var r=g?E(e,7,-1):x(e,_,"$1");return""===r?void 0:r}}),n({global:!0,forced:!0},{Symbol:p})}},2165:function(t,e,r){var n=r(7235);n("iterator")},4747:function(t,e,r){var n=r(7854),i=r(8324),o=r(8509),a=r(8533),c=r(8880),s=function(t){if(t&&t.forEach!==a)try{c(t,"forEach",a)}catch(e){t.forEach=a}};for(var u in i)i[u]&&s(n[u]&&n[u].prototype);s(o)},3948:function(t,e,r){var n=r(7854),i=r(8324),o=r(8509),a=r(6992),c=r(8880),s=r(5112),u=s("iterator"),l=s("toStringTag"),f=a.values,d=function(t,e){if(t){if(t[u]!==f)try{c(t,u,f)}catch(n){t[u]=f}if(t[l]||c(t,l,e),i[e])for(var r in a)if(t[r]!==a[r])try{c(t,r,a[r])}catch(n){t[r]=a[r]}}};for(var m in i)d(n[m]&&n[m].prototype,m);d(o,"DOMTokenList")},4479:function(t,e,r){"use strict";function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function i(t){if(Array.isArray(t))return n(t)}r.d(e,{Z:function(){return s}});r(2526),r(1817),r(1539),r(2165),r(8783),r(3948),r(1038);function o(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}r(7042),r(8309),r(4916),r(7601);function a(t,e){if(t){if("string"===typeof t)return n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0}}r(1703);function c(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(t){return i(t)||o(t)||a(t)||c()}}}]);
//# sourceMappingURL=563-legacy.884423c2.js.map