"use strict";(self["webpackChunkvue_admin"]=self["webpackChunkvue_admin"]||[]).push([[393],{1393:function(e,t,n){n.r(t),n.d(t,{default:function(){return c}});var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"table"},[n("div",{staticClass:"crumbs"},[n("el-breadcrumb",{attrs:{separator:"/"}},[n("el-breadcrumb-item",[n("i",{staticClass:"el-icon-lx-calendar"}),e._v(" 环境管理")]),n("el-breadcrumb-item",[e._v("环境列表")])],1)],1),n("div",{staticClass:"container"},[n("div",{staticClass:"handle-box"},[n("el-button",{staticClass:"handle-del mr10",attrs:{type:"primary",icon:"el-icon-delete"},on:{click:e.delAll}},[e._v("批量删除")]),n("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"按环境名称查询"},model:{value:e.select_word,callback:function(t){e.select_word=t},expression:"select_word"}}),n("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")])],1),n("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.tableData,border:"",stripe:""},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),n("el-table-column",{attrs:{type:"index",label:"序号",width:"55",align:"center"}}),n("el-table-column",{attrs:{prop:"name",label:"环境名称",width:"200"}}),n("el-table-column",{attrs:{prop:"base_url",label:"base_url",width:"350",align:"center"}}),n("el-table-column",{attrs:{prop:"desc",label:"描述",width:"200"}}),n("el-table-column",{attrs:{prop:"create_time",label:"创建时间",sortable:"",align:"center"}}),n("el-table-column",{attrs:{prop:"update_time",label:"更新时间",sortable:"",align:"center"}}),n("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(n){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),n("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(n){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),n("div",{staticClass:"pagination"},[n("el-pagination",{attrs:{background:"","page-sizes":[4,5,8,10,20],layout:"total, sizes, prev, pager, next, jumper",total:e.total_nums,"page-size":e.page_size},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})],1)],1),n("el-dialog",{attrs:{title:"编辑环境",visible:e.editVisible,width:"35%",center:""},on:{"update:visible":function(t){e.editVisible=t}}},[n("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px"}},[n("el-form-item",{attrs:{label:"接口名称"}},[n("el-input",{attrs:{clearable:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),n("el-form-item",{attrs:{label:"base_url"}},[n("el-input",{attrs:{clearable:""},model:{value:e.form.base_url,callback:function(t){e.$set(e.form,"base_url",t)},expression:"form.base_url"}})],1),n("el-form-item",{attrs:{label:"简要描述"}},[n("el-input",{attrs:{clearable:""},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.editVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.saveEdit}},[e._v("确 定")])],1)],1),n("el-dialog",{attrs:{title:"删除环境",visible:e.delVisible,width:"300px",center:""},on:{"update:visible":function(t){e.delVisible=t}}},[n("div",{staticClass:"del-dialog-cnt"},[e._v("删除不可恢复，是否确定删除？")]),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.delVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.deleteRow}},[e._v("确 定")])],1)])],1)},r=[],a=n(2552),s={name:"basetable",data(){return{tableData:[],cur_page:1,page_size:10,total_nums:1,multipleSelection:[],select_word:"",del_list:[],editVisible:!1,delVisible:!1,runVisible:!1,form:{},idx:-1,id:-1,env_id:"",envs_id_names:[]}},created(){this.getData()},methods:{handleCurrentChange(e){this.cur_page=e,this.getData()},handleSizeChange(e){this.page_size=e,this.getData()},getData(){(0,a.aj)({page:this.cur_page,size:this.page_size}).then((e=>{this.tableData=e.data.results,this.cur_page=e.data.current_page_num||1,this.total_nums=e.data.count||1}))},search(){(0,a.nL)({name:this.select_word}).then((e=>{this.tableData=e.data.results}))},handleEdit(e,t){this.idx=e,this.id=t.id,this.form={...t},this.editVisible=!0},handleDelete(e,t){this.idx=e,this.id=t.id,this.delVisible=!0},delAll(){(0,a.RQ)({idlist:this.del_list}).then((e=>{this.$message.success("删除成功"),this.tableData=e.data.results})).catch((e=>{this.$message.error("服务器错误")}))},handleSelectionChange(e){let t=e,n=[];for(var i=0;i<t.length;i++)n.push(t[i]["id"]);this.del_list=n},saveEdit(){""!==this.form.name?this.form.name.length>20?this.$message.error("项目名称不能超过20个字符"):(0,a.LO)(this.id,this.form).then((e=>{this.editVisible=!1,this.$message.success("修改成功"),this.tableData=e.data.results})).catch((e=>{this.editVisible=!1,this.$message.error("服务器错误")})):this.$message.error("请填写项目名称")},deleteRow(){(0,a.iO)(this.id).then((e=>{this.$message.success("删除成功"),this.tableData=e.data.results,this.cur_page=e.data.current_page_num||1,this.total_nums=e.data.count||1,this.delVisible=!1})).catch((e=>{this.$message.error("服务器错误")}))}}},l=s,o=n(1001),u=(0,o.Z)(l,i,r,!1,null,"48fe8831",null),c=u.exports},2552:function(e,t,n){n.d(t,{$8:function(){return te},$q:function(){return A},AH:function(){return le},AZ:function(){return _},B:function(){return d},Bx:function(){return G},Cs:function(){return U},DC:function(){return S},Dr:function(){return ce},FP:function(){return m},G3:function(){return I},GL:function(){return de},GW:function(){return ve},IG:function(){return h},KL:function(){return ne},Kh:function(){return be},Kq:function(){return _e},L$:function(){return c},LO:function(){return C},Lu:function(){return Y},NM:function(){return ae},NV:function(){return o},NW:function(){return V},OM:function(){return ee},PT:function(){return z},QG:function(){return xe},RB:function(){return L},RD:function(){return Ce},RQ:function(){return D},Sp:function(){return me},TR:function(){return X},Tg:function(){return oe},Tj:function(){return he},Vx:function(){return q},W7:function(){return J},WD:function(){return $},XC:function(){return N},Z4:function(){return K},ZH:function(){return T},Zf:function(){return v},_X:function(){return f},ah:function(){return re},aj:function(){return k},ay:function(){return R},cQ:function(){return ze},cu:function(){return fe},d9:function(){return s},ei:function(){return se},iO:function(){return x},ie:function(){return w},in:function(){return H},jJ:function(){return g},jh:function(){return $e},kJ:function(){return pe},kq:function(){return F},lO:function(){return ke},n:function(){return p},nL:function(){return j},nk:function(){return E},nq:function(){return b},ny:function(){return Z},o:function(){return O},pU:function(){return M},pW:function(){return ge},s2:function(){return ue},tK:function(){return y},tc:function(){return ye},th:function(){return u},vi:function(){return ie},vj:function(){return W},x4:function(){return l},xQ:function(){return Q},yr:function(){return B},z:function(){return P}});var i=n(4206),r=n.n(i);let a="http://kk.uoyo.net:8080";const s=e=>r().get(`${a}/project/list/?page=`+e.page+"&size="+e.size,e),l=e=>r().post(`${a}/project/detail/`,e),o=(e,t)=>r().put(`${a}/project/edit/`+e+"/",t),u=e=>r()["delete"](`${a}/project/delete/`+e+"/"),c=e=>r().post(`${a}/project/deleteall/`,e),d=e=>r().post(`${a}/project/add/`,e),p=()=>r().get(`${a}/interface/project/name`),f=()=>r().get(`${a}/project/get/env/`),g=e=>r().post(`${a}/project/run/`,e),h=e=>r().post(`${a}/interface/add/`,e),m=e=>r().get(`${a}/interface/list/?page=`+e.page+"&size="+e.size,e),$=(e,t)=>r().put(`${a}/interface/edit/`+e+"/",t),b=e=>r()["delete"](`${a}/interface/delete/`+e+"/"),_=e=>r().post(`${a}/interface/deleteall/`,e),v=e=>r().post(`${a}/interface/detail/`,e),z=()=>r().get(`${a}/interface/env/`),y=e=>r().post(`${a}/interface/run/`,e),k=e=>r().get(`${a}/env/list/?page=`+e.page+"&size="+e.size,e),C=(e,t)=>r().put(`${a}/env/edit/`+e+"/",t),x=e=>r()["delete"](`${a}/env/delete/`+e+"/"),w=e=>r().post(`${a}/env/add/`,e),j=e=>r().post(`${a}/env/detail/`,e),D=e=>r().post(`${a}/env/deleteall/`,e),V=e=>r().get(`${a}/debugtalk/list/?page=`+e.page+"&size="+e.size,e),L=e=>r().post(`${a}/debugtalk/detail/`,e),R=e=>r().get(`${a}/debugtalk/code/`+e+"/"),S=e=>r().put(`${a}/debugtalk/update/`,e),O=()=>r().get(`${a}/config/project/name/`),E=e=>r().post(`${a}/config/interface/name/`,e),G=e=>r().post(`${a}/config/save/`,e),Q=e=>r().get(`${a}/config/list/?page=`+e.page+"&size="+e.size,e),T=e=>r().post(`${a}/config/detail/`,e),W=e=>r()["delete"](`${a}/config/delete/`+e+"/"),Z=e=>r().post(`${a}/config/deleteall/`,e),q=e=>r().get(`${a}/config/detail/`+e+"/"),A=(e,t)=>r().put(`${a}/config/update/`+e+"/",t),K=()=>r().get(`${a}/testsuite/project/name/`),B=e=>r().post(`${a}/testsuite/interface/name/`,e),N=e=>r().post(`${a}/testsuite/add/`,e),H=e=>r().get(`${a}/testsuite/list/?page=`+e.page+"&size="+e.size,e),J=e=>r().post(`${a}/testsuite/detail/`,e),M=e=>r().get(`${a}/testsuite/detail/`+e+"/"),P=(e,t)=>r().put(`${a}/testsuite/update/`+e+"/",t),X=e=>r().post(`${a}/testsuite/deleteall/`,e),F=e=>r()["delete"](`${a}/testsuite/delete/`+e+"/"),I=()=>r().get(`${a}/testcase/project/name/`),U=e=>r().post(`${a}/testcase/interface/name/`,e),Y=e=>r().post(`${a}/testcase/configure/name/`,e),ee=e=>r().post(`${a}/testcase/name/`,e),te=e=>r().post(`${a}/testcase/add/`,e),ne=e=>r().get(`${a}/testcase/list/?page=`+e.page+"&size="+e.size),ie=e=>r().post(`${a}/testcase/detail/`,e),re=e=>r()["delete"](`${a}/testcase/delete/`+e+"/"),ae=e=>r().post(`${a}/testcase/deleteall/`,e),se=e=>r().get(`${a}/testcase/get/detail/`+e+"/"),le=e=>r().put(`${a}/testcase/update/`,e),oe=()=>r().get(`${a}/testcase/get/env/`),ue=e=>r().post(`${a}/testcase/run/`,e),ce=e=>r().get(`${a}/report/list/?page=`+e.page+"&size="+e.size),de=e=>r().get(`${a}/report/view/`+e+"/"),pe=e=>r().post(`${a}/report/download/`+e+"/"),fe=e=>r()["delete"](`${a}/report/delete/`+e+"/"),ge=e=>r().post(`${a}/report/deleteall/`,e),he=e=>r().post(`${a}/report/open/`,e),me=()=>r().get(`${a}/summary/data/`),$e=e=>r().post(`${a}/repository/add/`,e),be=e=>r().get(`${a}/repository/list/?page=`+e.page+"&size="+e.size),_e=e=>r().post(`${a}/repository/detail/`,e),ve=e=>r().put(`${a}/repository/update/`,e),ze=e=>r()["delete"](`${a}/repository/delete/`+e+"/"),ye=e=>r().post(`${a}/repository/deleteall/`,e),ke=e=>r().post(`${a}/repository/search/`,e),Ce=e=>r().post(`${a}/repository/git/`,e),xe=e=>r().post(`${a}/repository/compile/`,e)}}]);
//# sourceMappingURL=393.b0b2f285.js.map