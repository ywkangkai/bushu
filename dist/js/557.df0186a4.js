(self["webpackChunkvue_admin"]=self["webpackChunkvue_admin"]||[]).push([[557],{2557:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return d}});var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-tabs",{attrs:{type:"border-card"}},[a("el-tab-pane",{attrs:{label:"仓库信息"}},[a("div",{staticClass:"container"},[a("div",{staticClass:"form-box"},[a("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"git仓库地址",prop:"git"}},[a("el-input",{attrs:{"suffix-icon":"el-icon-menu",clearable:""},on:{focus:function(t){return e.clearValidate("git")}},model:{value:e.form.git,callback:function(t){e.$set(e.form,"git",t)},expression:"form.git"}})],1),a("el-form-item",{attrs:{label:"工程名称",prop:"name"}},[a("el-input",{attrs:{"suffix-icon":"el-icon-user-solid",clearable:""},on:{focus:function(t){return e.clearValidate("name")}},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"服务器地址",prop:"server"}},[a("el-input",{attrs:{"suffix-icon":"el-icon-user-solid",clearable:""},on:{focus:function(t){return e.clearValidate("server")}},model:{value:e.form.server,callback:function(t){e.$set(e.form,"server",t)},expression:"form.server"}})],1),a("el-form-item",{attrs:{label:"工程类型",prop:"type"}},[a("el-radio-group",{attrs:{size:"medium",clearable:""},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[a("el-radio",{attrs:{border:"",label:"前端工程项目"}}),a("el-radio",{attrs:{border:"",label:"后端工程项目"}})],1)],1)],1)],1)])]),a("el-tab-pane",{attrs:{label:"构建前步骤"}},[a("div",{staticClass:"table"},[a("el-row",[a("editor",{staticStyle:{"font-size":"15px"},attrs:{lang:"dockerfile",theme:"monokai",width:"100%",height:"600px",options:{enableSnippets:!0,enableBasicAutocompletion:!0,enableLiveAutocompletion:!0}},on:{init:e.editorInit},model:{value:e.setup_content,callback:function(t){e.setup_content=t},expression:"setup_content"}})],1)],1)]),a("el-tab-pane",{attrs:{label:"构建后步骤"}},[a("div",{staticClass:"table"},[a("el-row",[a("editor",{staticStyle:{"font-size":"15px"},attrs:{lang:"dockerfile",theme:"monokai",width:"100%",height:"600px",options:{enableSnippets:!0,enableBasicAutocompletion:!0,enableLiveAutocompletion:!0}},on:{init:e.editorInit},model:{value:e.teardown_content,callback:function(t){e.teardown_content=t},expression:"teardown_content"}})],1)],1)]),a("el-tab-pane",{attrs:{label:"通知到企业微信"}},[a("div",{staticClass:"container"},[a("div",{staticClass:"form-box"},[a("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"地址路径",prop:"address"}},[a("el-input",{attrs:{"suffix-icon":"el-icon-menu",clearable:""},on:{focus:function(t){return e.clearValidate("address")}},model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}})],1),a("el-form-item",{attrs:{label:"是否通知"}},[a("el-switch",{on:{change:e.changestatus},model:{value:e.form.send,callback:function(t){e.$set(e.form,"send",t)},expression:"form.send"}})],1)],1)],1)])]),a("el-row",{staticClass:"btn_class"},[a("el-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary",size:"medium"},on:{click:e.saveBuiltin}},[e._v("保存")])],1)],1)},o=[],i=a(2552),n={name:"baseform",components:{editor:a(3251)},data:function(){return{setup_content:"",teardown_content:"",id:"",form:{name:"",git:"",server:"",type:"",address:"",send:"",build:""},rules:{git:[{required:!0,message:"请输入git仓库地址",trigger:"blur"}],name:[{trigger:"blur",required:!0,message:"请输入工程名称"}],server:[{message:"请填写服务器地址",trigger:"blur",required:!0}],type:[{required:!0}],address:[{required:!0,message:"请输入企业微信地址",trigger:"blur"}]}}},created(){this.id=this.$route.params.id,this.getData()},methods:{changestatus(){!1===this.form.send?this.rules.address[0]["required"]=!1:this.rules.address[0]["required"]=!0},async saveBuiltin(){if(""===this.form.git)return void this.$message.error("请填写git仓库地址");let e={setup:this.setup_content,teardown:this.teardown_content};this.form.build=JSON.stringify(e),""!==this.form.name?""!==this.form.type?""!==this.form.server?!0!==this.form.send||""!==this.form.address?(0,i.GW)(this.form).then((e=>{e.data.hasOwnProperty("name")&&this.$message.error("工程名称已存在"),"success"===e.data.message&&(this.$message.success("项目修改成功"),this.$router.push("/font_list")),"faild"===e.data.message&&this.$message.error("添加失败请检查")})).catch((e=>{this.$message.error("服务器错误")})):this.$message.error("请填写企业微信通知地址"):this.$message.error("请填写服务器地址"):this.$message.error("请选择工程类型"):this.$message.error("请填写工程名称")},clearValidate(e){this.$refs["form"].clearValidate(e)},resetForm(e){this.$refs[e].resetFields()},editorInit(){a(5335),a(8230),a(2213),a(6345)},async getData(){let e=await(0,i.Kq)({id:this.id});this.form=e.data;let t=this.form.build,a=JSON.parse(t);this.setup_content=a["setup"],this.teardown_content=a["teardown"]}}},s=n,l=a(1001),c=(0,l.Z)(s,r,o,!1,null,"6526e627",null),d=c.exports},8230:function(){ace.define("ace/mode/sh_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],(function(e,t,a){"use strict";var r=e("../lib/oop"),o=e("./text_highlight_rules").TextHighlightRules,i=t.reservedKeywords="!|{|}|case|do|done|elif|else|esac|fi|for|if|in|then|until|while|&|;|export|local|read|typeset|unset|elif|select|set|function|declare|readonly",n=t.languageConstructs="[|]|alias|bg|bind|break|builtin|cd|command|compgen|complete|continue|dirs|disown|echo|enable|eval|exec|exit|fc|fg|getopts|hash|help|history|jobs|kill|let|logout|popd|printf|pushd|pwd|return|set|shift|shopt|source|suspend|test|times|trap|type|ulimit|umask|unalias|wait",s=function(){var e=this.createKeywordMapper({keyword:i,"support.function.builtin":n,"invalid.deprecated":"debugger"},"identifier"),t="(?:(?:[1-9]\\d*)|(?:0))",a="(?:\\.\\d+)",r="(?:\\d+)",o="(?:(?:"+r+"?"+a+")|(?:"+r+"\\.))",s="(?:(?:"+o+"|"+r+"))",l="(?:"+s+"|"+o+")",c="(?:&"+r+")",d="[a-zA-Z_][a-zA-Z0-9_]*",u="(?:"+d+"(?==))",g="(?:\\$(?:SHLVL|\\$|\\!|\\?))",m="(?:"+d+"\\s*\\(\\))";this.$rules={start:[{token:"constant",regex:/\\./},{token:["text","comment"],regex:/(^|\s)(#.*)$/},{token:"string.start",regex:'"',push:[{token:"constant.language.escape",regex:/\\(?:[$`"\\]|$)/},{include:"variables"},{token:"keyword.operator",regex:/`/},{token:"string.end",regex:'"',next:"pop"},{defaultToken:"string"}]},{token:"string",regex:"\\$'",push:[{token:"constant.language.escape",regex:/\\(?:[abeEfnrtv\\'"]|x[a-fA-F\d]{1,2}|u[a-fA-F\d]{4}([a-fA-F\d]{4})?|c.|\d{1,3})/},{token:"string",regex:"'",next:"pop"},{defaultToken:"string"}]},{regex:"<<<",token:"keyword.operator"},{stateName:"heredoc",regex:"(<<-?)(\\s*)(['\"`]?)([\\w\\-]+)(['\"`]?)",onMatch:function(e,t,a){var r="-"==e[2]?"indentedHeredoc":"heredoc",o=e.split(this.splitRegex);return a.push(r,o[4]),[{type:"constant",value:o[1]},{type:"text",value:o[2]},{type:"string",value:o[3]},{type:"support.class",value:o[4]},{type:"string",value:o[5]}]},rules:{heredoc:[{onMatch:function(e,t,a){return e===a[1]?(a.shift(),a.shift(),this.next=a[0]||"start","support.class"):(this.next="","string")},regex:".*$",next:"start"}],indentedHeredoc:[{token:"string",regex:"^\t+"},{onMatch:function(e,t,a){return e===a[1]?(a.shift(),a.shift(),this.next=a[0]||"start","support.class"):(this.next="","string")},regex:".*$",next:"start"}]}},{regex:"$",token:"empty",next:function(e,t){return"heredoc"===t[0]||"indentedHeredoc"===t[0]?t[0]:e}},{token:["keyword","text","text","text","variable"],regex:/(declare|local|readonly)(\s+)(?:(-[fixar]+)(\s+))?([a-zA-Z_][a-zA-Z0-9_]*\b)/},{token:"variable.language",regex:g},{token:"variable",regex:u},{include:"variables"},{token:"support.function",regex:m},{token:"support.function",regex:c},{token:"string",start:"'",end:"'"},{token:"constant.numeric",regex:l},{token:"constant.numeric",regex:t+"\\b"},{token:e,regex:"[a-zA-Z_][a-zA-Z0-9_]*\\b"},{token:"keyword.operator",regex:"\\+|\\-|\\*|\\*\\*|\\/|\\/\\/|~|<|>|<=|=>|=|!=|[%&|`]"},{token:"punctuation.operator",regex:";"},{token:"paren.lparen",regex:"[\\[\\(\\{]"},{token:"paren.rparen",regex:"[\\]]"},{token:"paren.rparen",regex:"[\\)\\}]",next:"pop"}],variables:[{token:"variable",regex:/(\$)(\w+)/},{token:["variable","paren.lparen"],regex:/(\$)(\()/,push:"start"},{token:["variable","paren.lparen","keyword.operator","variable","keyword.operator"],regex:/(\$)(\{)([#!]?)(\w+|[*@#?\-$!0_])(:[?+\-=]?|##?|%%?|,,?\/|\^\^?)?/,push:"start"},{token:"variable",regex:/\$[*@#?\-$!0_]/},{token:["variable","paren.lparen"],regex:/(\$)(\{)/,push:"start"}]},this.normalizeRules()};r.inherits(s,o),t.ShHighlightRules=s})),ace.define("ace/mode/folding/cstyle",["require","exports","module","ace/lib/oop","ace/range","ace/mode/folding/fold_mode"],(function(e,t,a){"use strict";var r=e("../../lib/oop"),o=e("../../range").Range,i=e("./fold_mode").FoldMode,n=t.FoldMode=function(e){e&&(this.foldingStartMarker=new RegExp(this.foldingStartMarker.source.replace(/\|[^|]*?$/,"|"+e.start)),this.foldingStopMarker=new RegExp(this.foldingStopMarker.source.replace(/\|[^|]*?$/,"|"+e.end)))};r.inherits(n,i),function(){this.foldingStartMarker=/([\{\[\(])[^\}\]\)]*$|^\s*(\/\*)/,this.foldingStopMarker=/^[^\[\{\(]*([\}\]\)])|^[\s\*]*(\*\/)/,this.singleLineBlockCommentRe=/^\s*(\/\*).*\*\/\s*$/,this.tripleStarBlockCommentRe=/^\s*(\/\*\*\*).*\*\/\s*$/,this.startRegionRe=/^\s*(\/\*|\/\/)#?region\b/,this._getFoldWidgetBase=this.getFoldWidget,this.getFoldWidget=function(e,t,a){var r=e.getLine(a);if(this.singleLineBlockCommentRe.test(r)&&!this.startRegionRe.test(r)&&!this.tripleStarBlockCommentRe.test(r))return"";var o=this._getFoldWidgetBase(e,t,a);return!o&&this.startRegionRe.test(r)?"start":o},this.getFoldWidgetRange=function(e,t,a,r){var o=e.getLine(a);if(this.startRegionRe.test(o))return this.getCommentRegionBlock(e,o,a);var i=o.match(this.foldingStartMarker);if(i){var n=i.index;if(i[1])return this.openingBracketBlock(e,i[1],a,n);var s=e.getCommentFoldRange(a,n+i[0].length,1);return s&&!s.isMultiLine()&&(r?s=this.getSectionRange(e,a):"all"!=t&&(s=null)),s}if("markbegin"!==t){i=o.match(this.foldingStopMarker);if(i){n=i.index+i[0].length;return i[1]?this.closingBracketBlock(e,i[1],a,n):e.getCommentFoldRange(a,n,-1)}}},this.getSectionRange=function(e,t){var a=e.getLine(t),r=a.search(/\S/),i=t,n=a.length;t+=1;var s=t,l=e.getLength();while(++t<l){a=e.getLine(t);var c=a.search(/\S/);if(-1!==c){if(r>c)break;var d=this.getFoldWidgetRange(e,"all",t);if(d){if(d.start.row<=i)break;if(d.isMultiLine())t=d.end.row;else if(r==c)break}s=t}}return new o(i,n,s,e.getLine(s).length)},this.getCommentRegionBlock=function(e,t,a){var r=t.search(/\s*$/),i=e.getLength(),n=a,s=/^\s*(?:\/\*|\/\/|--)#?(end)?region\b/,l=1;while(++a<i){t=e.getLine(a);var c=s.exec(t);if(c&&(c[1]?l--:l++,!l))break}var d=a;if(d>n)return new o(n,r,d,t.length)}}.call(n.prototype)})),ace.define("ace/mode/sh",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/sh_highlight_rules","ace/range","ace/mode/folding/cstyle","ace/mode/behaviour/cstyle"],(function(e,t,a){"use strict";var r=e("../lib/oop"),o=e("./text").Mode,i=e("./sh_highlight_rules").ShHighlightRules,n=e("../range").Range,s=e("./folding/cstyle").FoldMode,l=e("./behaviour/cstyle").CstyleBehaviour,c=function(){this.HighlightRules=i,this.foldingRules=new s,this.$behaviour=new l};r.inherits(c,o),function(){this.lineCommentStart="#",this.getNextLineIndent=function(e,t,a){var r=this.$getIndent(t),o=this.getTokenizer().getLineTokens(t,e),i=o.tokens;if(i.length&&"comment"==i[i.length-1].type)return r;if("start"==e){var n=t.match(/^.*[\{\(\[:]\s*$/);n&&(r+=a)}return r};var e={pass:1,return:1,raise:1,break:1,continue:1};this.checkOutdent=function(t,a,r){if("\r\n"!==r&&"\r"!==r&&"\n"!==r)return!1;var o=this.getTokenizer().getLineTokens(a.trim(),t).tokens;if(!o)return!1;do{var i=o.pop()}while(i&&("comment"==i.type||"text"==i.type&&i.value.match(/^\s+$/)));return!!i&&("keyword"==i.type&&e[i.value])},this.autoOutdent=function(e,t,a){a+=1;var r=this.$getIndent(t.getLine(a)),o=t.getTabString();r.slice(-o.length)==o&&t.remove(new n(a,r.length-o.length,a,r.length))},this.$id="ace/mode/sh"}.call(c.prototype),t.Mode=c})),ace.define("ace/mode/dockerfile_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/sh_highlight_rules"],(function(e,t,a){"use strict";var r=e("../lib/oop"),o=e("./sh_highlight_rules").ShHighlightRules,i=function(){o.call(this);for(var e=this.$rules.start,t=0;t<e.length;t++)if("variable.language"==e[t].token){e.splice(t,0,{token:"constant.language",regex:"(?:^(?:FROM|MAINTAINER|RUN|CMD|EXPOSE|ENV|ADD|ENTRYPOINT|VOLUME|USER|WORKDIR|ONBUILD|COPY|LABEL)\\b)",caseInsensitive:!0});break}};r.inherits(i,o),t.DockerfileHighlightRules=i})),ace.define("ace/mode/dockerfile",["require","exports","module","ace/lib/oop","ace/mode/sh","ace/mode/dockerfile_highlight_rules","ace/mode/folding/cstyle"],(function(e,t,a){"use strict";var r=e("../lib/oop"),o=e("./sh").Mode,i=e("./dockerfile_highlight_rules").DockerfileHighlightRules,n=e("./folding/cstyle").FoldMode,s=function(){o.call(this),this.HighlightRules=i,this.foldingRules=new n};r.inherits(s,o),function(){this.$id="ace/mode/dockerfile"}.call(s.prototype),t.Mode=s}))},6345:function(){ace.define("ace/snippets/dockerfile",["require","exports","module"],(function(e,t,a){"use strict";t.snippetText=void 0,t.scope="dockerfile"}))},2213:function(){ace.define("ace/theme/monokai",["require","exports","module","ace/lib/dom"],(function(e,t,a){t.isDark=!0,t.cssClass="ace-monokai",t.cssText=".ace-monokai .ace_gutter {background: #2F3129;color: #8F908A}.ace-monokai .ace_print-margin {width: 1px;background: #555651}.ace-monokai {background-color: #272822;color: #F8F8F2}.ace-monokai .ace_cursor {color: #F8F8F0}.ace-monokai .ace_marker-layer .ace_selection {background: #49483E}.ace-monokai.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px #272822;}.ace-monokai .ace_marker-layer .ace_step {background: rgb(102, 82, 0)}.ace-monokai .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid #49483E}.ace-monokai .ace_marker-layer .ace_active-line {background: #202020}.ace-monokai .ace_gutter-active-line {background-color: #272727}.ace-monokai .ace_marker-layer .ace_selected-word {border: 1px solid #49483E}.ace-monokai .ace_invisible {color: #52524d}.ace-monokai .ace_entity.ace_name.ace_tag,.ace-monokai .ace_keyword,.ace-monokai .ace_meta.ace_tag,.ace-monokai .ace_storage {color: #F92672}.ace-monokai .ace_punctuation,.ace-monokai .ace_punctuation.ace_tag {color: #fff}.ace-monokai .ace_constant.ace_character,.ace-monokai .ace_constant.ace_language,.ace-monokai .ace_constant.ace_numeric,.ace-monokai .ace_constant.ace_other {color: #AE81FF}.ace-monokai .ace_invalid {color: #F8F8F0;background-color: #F92672}.ace-monokai .ace_invalid.ace_deprecated {color: #F8F8F0;background-color: #AE81FF}.ace-monokai .ace_support.ace_constant,.ace-monokai .ace_support.ace_function {color: #66D9EF}.ace-monokai .ace_fold {background-color: #A6E22E;border-color: #F8F8F2}.ace-monokai .ace_storage.ace_type,.ace-monokai .ace_support.ace_class,.ace-monokai .ace_support.ace_type {font-style: italic;color: #66D9EF}.ace-monokai .ace_entity.ace_name.ace_function,.ace-monokai .ace_entity.ace_other,.ace-monokai .ace_entity.ace_other.ace_attribute-name,.ace-monokai .ace_variable {color: #A6E22E}.ace-monokai .ace_variable.ace_parameter {font-style: italic;color: #FD971F}.ace-monokai .ace_string {color: #E6DB74}.ace-monokai .ace_comment {color: #75715E}.ace-monokai .ace_indent-guide {background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWPQ0FD0ZXBzd/wPAAjVAoxeSgNeAAAAAElFTkSuQmCC) right repeat-y}";var r=e("../lib/dom");r.importCssString(t.cssText,t.cssClass)}))}}]);
//# sourceMappingURL=557.df0186a4.js.map