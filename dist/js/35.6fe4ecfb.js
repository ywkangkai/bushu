"use strict";(self["webpackChunkvue_admin"]=self["webpackChunkvue_admin"]||[]).push([[35],{9035:function(t,e,n){n.r(e),n.d(e,{default:function(){return c}});var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"table"},[n("div",{staticClass:"crumbs"},[n("el-breadcrumb",{attrs:{separator:"/"}},[n("el-breadcrumb-item",[n("i",{staticClass:"el-icon-lx-calendar"}),t._v(" 套件管理")]),n("el-breadcrumb-item",[t._v("套件列表")])],1)],1),n("div",{staticClass:"container"},[n("div",{staticClass:"handle-box"},[n("el-button",{staticClass:"handle-del mr10",attrs:{type:"primary",icon:"el-icon-delete"},on:{click:t.delAll}},[t._v("批量删除")]),n("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"输入筛选关键词"},model:{value:t.select_word,callback:function(e){t.select_word=e},expression:"select_word"}}),n("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.search}},[t._v("搜索")])],1),n("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:t.tableData,border:"",stripe:""},on:{"selection-change":t.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),n("el-table-column",{attrs:{type:"index",label:"序号",width:"55",align:"center"}}),n("el-table-column",{attrs:{prop:"name",label:"套件名称",width:"250"}}),n("el-table-column",{attrs:{prop:"project",label:"所属项目",width:"250"}}),n("el-table-column",{attrs:{prop:"create_time",label:"创建时间",sortable:"",align:"center"}}),n("el-table-column",{attrs:{prop:"update_time",label:"更新时间",sortable:"",align:"center"}}),n("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(n){return t.handleRun(e.$index,e.row)}}},[t._v("运行")]),n("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(n){return t.linkTo(e.row.id)}}},[t._v("编辑")]),n("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(n){return t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1),n("div",{staticClass:"pagination"},[n("el-pagination",{attrs:{background:"","page-sizes":[4,5,8,10,20],layout:"total, sizes, prev, pager, next, jumper",total:t.total_nums,"page-size":t.page_size},on:{"current-change":t.handleCurrentChange,"size-change":t.handleSizeChange}})],1)],1),n("el-dialog",{attrs:{title:"编辑套件",visible:t.editVisible,width:"30%",center:""},on:{"update:visible":function(e){t.editVisible=e}}},[n("el-form",{ref:"form",attrs:{model:t.form,"label-width":"120px"}},[n("el-form-item",{attrs:{label:"套件名称"}},[n("el-input",{attrs:{clearable:""},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),n("el-form-item",{attrs:{label:"测试人员"}},[n("el-input",{attrs:{clearable:""},model:{value:t.form.tester,callback:function(e){t.$set(t.form,"tester",e)},expression:"form.tester"}})],1),n("el-form-item",{attrs:{label:"所属项目"}},[n("el-input",{attrs:{disabled:""},model:{value:t.form.project,callback:function(e){t.$set(t.form,"project",e)},expression:"form.project"}})],1),n("el-form-item",{attrs:{label:"简要描述"}},[n("el-input",{attrs:{clearable:""},model:{value:t.form.desc,callback:function(e){t.$set(t.form,"desc",e)},expression:"form.desc"}})],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.editVisible=!1}}},[t._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:t.saveEdit}},[t._v("确 定")])],1)],1),n("el-dialog",{attrs:{title:"删除套件",visible:t.delVisible,width:"300px",center:""},on:{"update:visible":function(e){t.delVisible=e}}},[n("div",{staticClass:"del-dialog-cnt"},[t._v("删除不可恢复，是否确定删除？")]),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.delVisible=!1}}},[t._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:t.deleteRow}},[t._v("确 定")])],1)]),n("el-dialog",{attrs:{title:"运行套件",visible:t.runVisible,width:"30%",center:""},on:{"update:visible":function(e){t.runVisible=e}}},[n("el-form",{ref:"form",attrs:{model:t.form,"label-width":"120px"}},[n("el-form-item",{attrs:{label:"运行环境"}},[n("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:t.env_id,callback:function(e){t.env_id=e},expression:"env_id"}},t._l(t.envs_id_names,(function(t){return n("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.runVisible=!1}}},[t._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:t.confirmRun}},[t._v("运 行")])],1)],1)],1)},r=[],s=n(2552),a={name:"basetable",data(){return{tableData:[],cur_page:1,page_size:10,total_nums:1,multipleSelection:[],select_word:"",del_list:[],editVisible:!1,delVisible:!1,runVisible:!1,form:{},idx:-1,id:-1,env_id:"",envs_id_names:[]}},created(){this.getData(),this.getEnvsIdNames()},methods:{handleCurrentChange(t){this.cur_page=t,this.getData()},handleSizeChange(t){this.page_size=t,this.getData()},getData(){(0,s["in"])({page:this.cur_page,size:this.page_size}).then((t=>{this.tableData=t.data.results,this.cur_page=t.data.current_page_num||1,this.total_nums=t.data.count||1}))},handleEdit(t,e){this.idx=t,this.id=e.id,this.form=e,this.editVisible=!0},handleRun(t,e){this.idx=t,this.id=e.id,this.form=e,this.runVisible=!0},handleDelete(t,e){this.idx=t,this.id=e.id,this.delVisible=!0},delAll(){(0,s.TR)({idlist:this.del_list}).then((t=>{this.$message.success("删除成功"),this.tableData=t.data.results})).catch((t=>{this.$message.error("服务器错误")}))},handleSelectionChange(t){let e=t,n=[];for(var i=0;i<e.length;i++)n.push(e[i]["id"]);this.del_list=n},deleteRow(){(0,s.kq)(this.id).then((t=>{this.$message.success("删除成功"),this.delVisible=!1,this.tableData=t.data.results,this.cur_page=t.data.current_page_num||1,this.total_nums=t.data.count||1})).catch((t=>{this.$message.error("服务器错误")}))},getEnvsIdNames(){(0,s.Tg)().then((t=>{this.envs_id_names=t.data})).catch((t=>{this.$message.error("服务器错误")}))},confirmRun(){(0,s.run_by_testsuite)(this.id,this.env_id).then((t=>{this.$router.push({path:`/reports_view/${t.data.id}`})})).catch((t=>{"object"===typeof t&&t.hasOwnProperty("msg")?this.$message.error(t.msg):this.$message.error("服务器错误")}))},linkTo(t){this.$router.push({path:`/testsuites_edit/${t}`})},search(){(0,s.W7)({name:this.select_word}).then((t=>{this.tableData=t.data.results}))}}},o=a,l=n(1001),u=(0,l.Z)(o,i,r,!1,null,"7bb37fa2",null),c=u.exports},2552:function(t,e,n){n.d(e,{$8:function(){return et},$q:function(){return A},AH:function(){return ot},AZ:function(){return v},B:function(){return d},Bx:function(){return q},Cs:function(){return U},DC:function(){return S},Dr:function(){return ct},FP:function(){return m},G3:function(){return F},GL:function(){return dt},GW:function(){return _t},IG:function(){return h},KL:function(){return nt},Kh:function(){return $t},Kq:function(){return vt},L$:function(){return c},LO:function(){return x},Lu:function(){return Y},NM:function(){return st},NV:function(){return l},NW:function(){return D},OM:function(){return tt},PT:function(){return k},QG:function(){return Ct},RB:function(){return R},RD:function(){return xt},RQ:function(){return V},Sp:function(){return mt},TR:function(){return M},Tg:function(){return lt},Tj:function(){return ht},Vx:function(){return Z},W7:function(){return P},WD:function(){return b},XC:function(){return B},Z4:function(){return K},ZH:function(){return G},Zf:function(){return _},_X:function(){return f},ah:function(){return rt},aj:function(){return z},ay:function(){return T},cQ:function(){return kt},cu:function(){return ft},d9:function(){return a},ei:function(){return at},iO:function(){return C},ie:function(){return w},in:function(){return I},jJ:function(){return g},jh:function(){return bt},kJ:function(){return pt},kq:function(){return X},lO:function(){return zt},n:function(){return p},nL:function(){return j},nk:function(){return W},nq:function(){return $},ny:function(){return O},o:function(){return L},pU:function(){return H},pW:function(){return gt},s2:function(){return ut},tK:function(){return y},tc:function(){return yt},th:function(){return u},vi:function(){return it},vj:function(){return N},x4:function(){return o},xQ:function(){return E},yr:function(){return Q},z:function(){return J}});var i=n(4206),r=n.n(i);let s="http://kk.uoyo.net:8080";const a=t=>r().get(`${s}/project/list/?page=`+t.page+"&size="+t.size,t),o=t=>r().post(`${s}/project/detail/`,t),l=(t,e)=>r().put(`${s}/project/edit/`+t+"/",e),u=t=>r()["delete"](`${s}/project/delete/`+t+"/"),c=t=>r().post(`${s}/project/deleteall/`,t),d=t=>r().post(`${s}/project/add/`,t),p=()=>r().get(`${s}/interface/project/name`),f=()=>r().get(`${s}/project/get/env/`),g=t=>r().post(`${s}/project/run/`,t),h=t=>r().post(`${s}/interface/add/`,t),m=t=>r().get(`${s}/interface/list/?page=`+t.page+"&size="+t.size,t),b=(t,e)=>r().put(`${s}/interface/edit/`+t+"/",e),$=t=>r()["delete"](`${s}/interface/delete/`+t+"/"),v=t=>r().post(`${s}/interface/deleteall/`,t),_=t=>r().post(`${s}/interface/detail/`,t),k=()=>r().get(`${s}/interface/env/`),y=t=>r().post(`${s}/interface/run/`,t),z=t=>r().get(`${s}/env/list/?page=`+t.page+"&size="+t.size,t),x=(t,e)=>r().put(`${s}/env/edit/`+t+"/",e),C=t=>r()["delete"](`${s}/env/delete/`+t+"/"),w=t=>r().post(`${s}/env/add/`,t),j=t=>r().post(`${s}/env/detail/`,t),V=t=>r().post(`${s}/env/deleteall/`,t),D=t=>r().get(`${s}/debugtalk/list/?page=`+t.page+"&size="+t.size,t),R=t=>r().post(`${s}/debugtalk/detail/`,t),T=t=>r().get(`${s}/debugtalk/code/`+t+"/"),S=t=>r().put(`${s}/debugtalk/update/`,t),L=()=>r().get(`${s}/config/project/name/`),W=t=>r().post(`${s}/config/interface/name/`,t),q=t=>r().post(`${s}/config/save/`,t),E=t=>r().get(`${s}/config/list/?page=`+t.page+"&size="+t.size,t),G=t=>r().post(`${s}/config/detail/`,t),N=t=>r()["delete"](`${s}/config/delete/`+t+"/"),O=t=>r().post(`${s}/config/deleteall/`,t),Z=t=>r().get(`${s}/config/detail/`+t+"/"),A=(t,e)=>r().put(`${s}/config/update/`+t+"/",e),K=()=>r().get(`${s}/testsuite/project/name/`),Q=t=>r().post(`${s}/testsuite/interface/name/`,t),B=t=>r().post(`${s}/testsuite/add/`,t),I=t=>r().get(`${s}/testsuite/list/?page=`+t.page+"&size="+t.size,t),P=t=>r().post(`${s}/testsuite/detail/`,t),H=t=>r().get(`${s}/testsuite/detail/`+t+"/"),J=(t,e)=>r().put(`${s}/testsuite/update/`+t+"/",e),M=t=>r().post(`${s}/testsuite/deleteall/`,t),X=t=>r()["delete"](`${s}/testsuite/delete/`+t+"/"),F=()=>r().get(`${s}/testcase/project/name/`),U=t=>r().post(`${s}/testcase/interface/name/`,t),Y=t=>r().post(`${s}/testcase/configure/name/`,t),tt=t=>r().post(`${s}/testcase/name/`,t),et=t=>r().post(`${s}/testcase/add/`,t),nt=t=>r().get(`${s}/testcase/list/?page=`+t.page+"&size="+t.size),it=t=>r().post(`${s}/testcase/detail/`,t),rt=t=>r()["delete"](`${s}/testcase/delete/`+t+"/"),st=t=>r().post(`${s}/testcase/deleteall/`,t),at=t=>r().get(`${s}/testcase/get/detail/`+t+"/"),ot=t=>r().put(`${s}/testcase/update/`,t),lt=()=>r().get(`${s}/testcase/get/env/`),ut=t=>r().post(`${s}/testcase/run/`,t),ct=t=>r().get(`${s}/report/list/?page=`+t.page+"&size="+t.size),dt=t=>r().get(`${s}/report/view/`+t+"/"),pt=t=>r().post(`${s}/report/download/`+t+"/"),ft=t=>r()["delete"](`${s}/report/delete/`+t+"/"),gt=t=>r().post(`${s}/report/deleteall/`,t),ht=t=>r().post(`${s}/report/open/`,t),mt=()=>r().get(`${s}/summary/data/`),bt=t=>r().post(`${s}/repository/add/`,t),$t=t=>r().get(`${s}/repository/list/?page=`+t.page+"&size="+t.size),vt=t=>r().post(`${s}/repository/detail/`,t),_t=t=>r().put(`${s}/repository/update/`,t),kt=t=>r()["delete"](`${s}/repository/delete/`+t+"/"),yt=t=>r().post(`${s}/repository/deleteall/`,t),zt=t=>r().post(`${s}/repository/search/`,t),xt=t=>r().post(`${s}/repository/git/`,t),Ct=t=>r().post(`${s}/repository/compile/`,t)}}]);
//# sourceMappingURL=35.6fe4ecfb.js.map