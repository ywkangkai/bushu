(self["webpackChunkvue_admin"]=self["webpackChunkvue_admin"]||[]).push([[360],{3360:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return f}});var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"table"},[r("div",{staticClass:"crumbs"},[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",[r("i",{staticClass:"el-icon-lx-calendar"}),e._v(" 项目管理")]),r("el-breadcrumb-item",[e._v("项目列表")])],1)],1),r("div",{staticClass:"container"},[r("div",{staticClass:"handle-box"},[r("el-button",{staticClass:"handle-del mr10",attrs:{type:"primary",icon:"el-icon-delete"},on:{click:e.delAll}},[e._v("批量删除")]),r("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"按项目名称搜索"},model:{value:e.select_project,callback:function(t){e.select_project=t},expression:"select_project"}}),r("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")])],1),r("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.tableData,border:"",stripe:""},on:{"selection-change":e.handleSelectionChange}},[r("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),r("el-table-column",{attrs:{type:"index",label:"序号",width:"55",align:"center"}}),r("el-table-column",{attrs:{prop:"projectname",label:"项目名称",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-popover",{attrs:{trigger:"hover",placement:"top"}},[r("router-link",{staticClass:"register_link",attrs:{to:"/interfaces_list"}},[r("p",[e._v("接口数: "+e._s(t.row.interfaces_set.length))])]),r("router-link",{staticClass:"register_link",attrs:{to:"/testsuites_list"}},[r("p",[e._v("套件数: "+e._s(t.row.testsuits))])]),r("router-link",{staticClass:"register_link",attrs:{to:"/testcases_list"}},[r("p",[e._v("用例数: "+e._s(t.row.testcases))])]),r("router-link",{staticClass:"register_link",attrs:{to:"/configures_list"}},[r("p",[e._v("配置数: "+e._s(t.row.configures))])]),r("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[r("el-tag",{attrs:{size:"medium"}},[e._v(e._s(t.row.projectname))])],1)],1)]}}])}),r("el-table-column",{attrs:{prop:"leader",label:"项目负责人",width:"100",align:"center"}}),r("el-table-column",{attrs:{prop:"appname",label:"应用名称",width:"250"}}),r("el-table-column",{attrs:{prop:"test",label:"测试人员",width:"100",align:"center"}}),r("el-table-column",{attrs:{prop:"create_time",label:"创建时间",sortable:"",align:"center"}}),r("el-table-column",{attrs:{prop:"update_time",label:"更新时间",sortable:"",align:"center"}}),r("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(r){return e.handleRun(t.$index,t.row)}}},[e._v("运行")]),r("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(r){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),r("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(r){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),r("div",{staticClass:"pagination"},[r("el-pagination",{attrs:{background:"","page-sizes":[4,5,8,10,20],layout:"total, sizes, prev, pager, next, jumper",total:e.total_nums,"page-size":e.page_size},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})],1)],1),r("el-dialog",{attrs:{title:"编辑项目",visible:e.editVisible,width:"30%",center:""},on:{"update:visible":function(t){e.editVisible=t}}},[r("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"项目名称"}},[r("el-input",{attrs:{clearable:""},model:{value:e.form.projectname,callback:function(t){e.$set(e.form,"projectname",t)},expression:"form.projectname"}})],1),r("el-form-item",{attrs:{label:"项目负责人"}},[r("el-input",{attrs:{clearable:""},model:{value:e.form.leader,callback:function(t){e.$set(e.form,"leader",t)},expression:"form.leader"}})],1),r("el-form-item",{attrs:{label:"测试人员"}},[r("el-input",{attrs:{clearable:""},model:{value:e.form.test,callback:function(t){e.$set(e.form,"test",t)},expression:"form.test"}})],1),r("el-form-item",{attrs:{label:"应用名称"}},[r("el-input",{attrs:{clearable:""},model:{value:e.form.appname,callback:function(t){e.$set(e.form,"appname",t)},expression:"form.appname"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.editVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.saveEdit}},[e._v("确 定")])],1)],1),r("el-dialog",{attrs:{title:"删除项目",visible:e.delVisible,width:"300px",center:""},on:{"update:visible":function(t){e.delVisible=t}}},[r("div",{staticClass:"del-dialog-cnt"},[e._v("删除不可恢复，是否确定删除？")]),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.delVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.deleteRow}},[e._v("确 定")])],1)]),r("el-dialog",{attrs:{title:"运行项目",visible:e.runVisible,width:"30%",center:""},on:{"update:visible":function(t){e.runVisible=t}}},[r("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"运行环境"}},[r("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.env_id,callback:function(t){e.env_id=t},expression:"env_id"}},e._l(e.envs_id_names,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",[e._v("取 消")]),r("el-button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{type:"primary"},on:{click:e.openFullScreen1}},[e._v("运行")])],1)],1)],1)},a=[],i=r(6198),s=r(3019),l=(r(5666),r(2552)),o={name:"basetable",data:function(){return{tableData:[],cur_page:1,page_size:10,total_nums:1,multipleSelection:[],select_project:"",del_list:[],editVisible:!1,delVisible:!1,runVisible:!1,form:{},project_idx:-1,project_id:-1,env_id:"",envs_id_names:[]}},created:function(){this.getData(),this.getEnvsIdNames()},methods:{handleCurrentChange:function(e){this.cur_page=e,this.getData()},handleSizeChange:function(e){this.page_size=e,this.getData()},getData:function(){var e=this;(0,l.d9)({page:this.cur_page,size:this.page_size}).then((function(t){e.tableData=t.data.results,e.cur_page=t.data.current_page_num||1,e.total_nums=t.data.count||1}))},search:function(){var e=this;(0,l.x4)({projectname:this.select_project}).then((function(t){e.tableData=t.data.results}))},handleEdit:function(e,t){this.project_idx=e,this.project_id=t.id,this.form=(0,s.Z)({},t),this.editVisible=!0},handleRun:function(e,t){this.project_idx=e,this.project_id=t.id,this.form=t,this.runVisible=!0},handleDelete:function(e,t){this.project_idx=e,this.project_id=t.id,this.delVisible=!0},delAll:function(){var e=this;(0,l.L$)({idlist:this.del_list}).then((function(t){e.$message.success("删除成功"),e.tableData=t.data.results})).catch((function(t){e.$message.error("服务器错误")}))},handleSelectionChange:function(e){for(var t=e,r=[],n=0;n<t.length;n++)r.push(t[n]["id"]);this.del_list=r},saveEdit:function(){var e=this;""!==this.form.projectname?this.form.projectname.length>20?this.$message.error("项目名称不能超过20个字符"):(0,l.NV)(this.project_id,this.form).then((function(t){e.editVisible=!1,e.$message.success("修改成功"),e.tableData=t.data.results})).catch((function(t){e.editVisible=!1,e.$message.error("服务器错误")})):this.$message.error("请填写项目名称")},deleteRow:function(){var e=this;(0,l.th)(this.project_id).then((function(t){e.$message.success("删除成功"),e.delVisible=!1,e.tableData=t.data.results,e.cur_page=t.data.current_page_num||1,e.total_nums=t.data.count||1})).catch((function(t){e.$message.error("服务器错误")}))},getEnvsIdNames:function(){var e=this;(0,l._X)().then((function(t){e.envs_id_names=t.data})).catch((function(t){e.$message.error("服务器错误")}))},open:function(e){var t=this;this.$confirm("用例执行完成，是否前往查看报告?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$router.push({path:"/reports_view/".concat(e.data.id)})})).catch((function(){}))},openFullScreen1:function(){var e=this;return(0,i.Z)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""!==e.env_id){t.next=4;break}e.$message.error("请选择运行环境"),t.next=15;break;case 4:return e.runVisible=!1,e.fullscreenLoading=!0,t.next=8,(0,l.jJ)({pid:e.project_id,env_id:e.env_id});case 8:if(r=t.sent,console.log(r),"当前接口不存在用例无法运行"!==r.data.message){t.next=14;break}return e.fullscreenLoading=!1,e.$message.error("当前接口未添加用例无法执行"),t.abrupt("return");case 14:r.status,e.fullscreenLoading=!1,e.open(r);case 15:case"end":return t.stop()}}),t)})))()}}},c=o,u=r(1001),d=(0,u.Z)(c,n,a,!1,null,"2028e79b",null),f=d.exports},8533:function(e,t,r){"use strict";var n=r(2092).forEach,a=r(9341),i=a("forEach");e.exports=i?[].forEach:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}},1194:function(e,t,r){var n=r(7293),a=r(5112),i=r(7392),s=a("species");e.exports=function(e){return i>=51||!n((function(){var t=[],r=t.constructor={};return r[s]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},9341:function(e,t,r){"use strict";var n=r(7293);e.exports=function(e,t){var r=[][e];return!!r&&n((function(){r.call(null,t||function(){return 1},1)}))}},7327:function(e,t,r){"use strict";var n=r(2109),a=r(2092).filter,i=r(1194),s=i("filter");n({target:"Array",proto:!0,forced:!s},{filter:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})},5003:function(e,t,r){var n=r(2109),a=r(7293),i=r(5656),s=r(1236).f,l=r(9781),o=a((function(){s(1)})),c=!l||o;n({target:"Object",stat:!0,forced:c,sham:!l},{getOwnPropertyDescriptor:function(e,t){return s(i(e),t)}})},9337:function(e,t,r){var n=r(2109),a=r(9781),i=r(3887),s=r(5656),l=r(1236),o=r(6135);n({target:"Object",stat:!0,sham:!a},{getOwnPropertyDescriptors:function(e){var t,r,n=s(e),a=l.f,c=i(n),u={},d=0;while(c.length>d)r=a(n,t=c[d++]),void 0!==r&&o(u,t,r);return u}})},7941:function(e,t,r){var n=r(2109),a=r(7908),i=r(1956),s=r(7293),l=s((function(){i(1)}));n({target:"Object",stat:!0,forced:l},{keys:function(e){return i(a(e))}})},4747:function(e,t,r){var n=r(7854),a=r(8324),i=r(8509),s=r(8533),l=r(8880),o=function(e){if(e&&e.forEach!==s)try{l(e,"forEach",s)}catch(t){e.forEach=s}};for(var c in a)a[c]&&o(n[c]&&n[c].prototype);o(i)},3019:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});r(7941),r(2526),r(7327),r(1539),r(5003),r(4747),r(9337);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}}}]);
//# sourceMappingURL=360-legacy.a4412aa0.js.map