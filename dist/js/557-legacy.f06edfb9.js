(self["webpackChunkvue_admin"]=self["webpackChunkvue_admin"]||[]).push([[557],{2557:function(e,a,r){"use strict";r.r(a),r.d(a,{default:function(){return u}});var t=function(){var e=this,a=e.$createElement,r=e._self._c||a;return r("el-tabs",{attrs:{type:"border-card"}},[r("el-tab-pane",{attrs:{label:"仓库信息"}},[r("div",{staticClass:"container"},[r("div",{staticClass:"form-box"},[r("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"git仓库地址",prop:"git"}},[r("el-input",{attrs:{"suffix-icon":"el-icon-menu",clearable:""},on:{focus:function(a){return e.clearValidate("git")}},model:{value:e.form.git,callback:function(a){e.$set(e.form,"git",a)},expression:"form.git"}})],1),r("el-form-item",{attrs:{label:"工程名称",prop:"name"}},[r("el-input",{attrs:{"suffix-icon":"el-icon-user-solid",clearable:""},on:{focus:function(a){return e.clearValidate("name")}},model:{value:e.form.name,callback:function(a){e.$set(e.form,"name",a)},expression:"form.name"}})],1),r("el-form-item",{attrs:{label:"服务器地址",prop:"server"}},[r("el-input",{attrs:{"suffix-icon":"el-icon-user-solid",clearable:""},on:{focus:function(a){return e.clearValidate("server")}},model:{value:e.form.server,callback:function(a){e.$set(e.form,"server",a)},expression:"form.server"}})],1),r("el-form-item",{attrs:{label:"工程类型",prop:"type"}},[r("el-radio-group",{attrs:{size:"medium",clearable:""},model:{value:e.form.type,callback:function(a){e.$set(e.form,"type",a)},expression:"form.type"}},[r("el-radio",{attrs:{border:"",label:"前端工程项目"}}),r("el-radio",{attrs:{border:"",label:"后端工程项目"}})],1)],1)],1)],1)])]),r("el-tab-pane",{attrs:{label:"构建前步骤"}},[r("div",{staticClass:"table"},[r("el-row",[r("editor",{staticStyle:{"font-size":"15px"},attrs:{lang:"dockerfile",theme:"monokai",width:"100%",height:"600px",options:{enableSnippets:!0,enableBasicAutocompletion:!0,enableLiveAutocompletion:!0}},on:{init:e.editorInit},model:{value:e.setup_content,callback:function(a){e.setup_content=a},expression:"setup_content"}})],1)],1)]),r("el-tab-pane",{attrs:{label:"构建后步骤"}},[r("div",{staticClass:"table"},[r("el-row",[r("editor",{staticStyle:{"font-size":"15px"},attrs:{lang:"dockerfile",theme:"monokai",width:"100%",height:"600px",options:{enableSnippets:!0,enableBasicAutocompletion:!0,enableLiveAutocompletion:!0}},on:{init:e.editorInit},model:{value:e.teardown_content,callback:function(a){e.teardown_content=a},expression:"teardown_content"}})],1)],1)]),r("el-tab-pane",{attrs:{label:"通知到企业微信"}},[r("div",{staticClass:"container"},[r("div",{staticClass:"form-box"},[r("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"地址路径",prop:"address"}},[r("el-input",{attrs:{"suffix-icon":"el-icon-menu",clearable:""},on:{focus:function(a){return e.clearValidate("address")}},model:{value:e.form.address,callback:function(a){e.$set(e.form,"address",a)},expression:"form.address"}})],1),r("el-form-item",{attrs:{label:"是否通知"}},[r("el-switch",{on:{change:e.changestatus},model:{value:e.form.send,callback:function(a){e.$set(e.form,"send",a)},expression:"form.send"}})],1)],1)],1)])]),r("el-row",{staticClass:"btn_class"},[r("el-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary",size:"medium"},on:{click:e.saveBuiltin}},[e._v("保存")])],1)],1)},o=[],n=r(6198),c=(r(5666),r(8862),r(8309),r(2552)),i={name:"baseform",components:{editor:r(3251)},data:function(){return{setup_content:"",teardown_content:"",id:"",form:{name:"",git:"",server:"",type:"",address:"",send:"",build:""},rules:{git:[{required:!0,message:"请输入git仓库地址",trigger:"blur"}],name:[{trigger:"blur",required:!0,message:"请输入工程名称"}],server:[{message:"请填写服务器地址",trigger:"blur",required:!0}],type:[{required:!0}],address:[{required:!0,message:"请输入企业微信地址",trigger:"blur"}]}}},created:function(){this.id=this.$route.params.id,this.getData()},methods:{changestatus:function(){!1===this.form.send?this.rules.address[0]["required"]=!1:this.rules.address[0]["required"]=!0},saveBuiltin:function(){var e=this;return(0,n.Z)(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(""!==e.form.git){a.next=3;break}return e.$message.error("请填写git仓库地址"),a.abrupt("return");case 3:if(r={setup:e.setup_content,teardown:e.teardown_content},e.form.build=JSON.stringify(r),""!==e.form.name){a.next=8;break}return e.$message.error("请填写工程名称"),a.abrupt("return");case 8:if(""!==e.form.type){a.next=11;break}return e.$message.error("请选择工程类型"),a.abrupt("return");case 11:if(""!==e.form.server){a.next=14;break}return e.$message.error("请填写服务器地址"),a.abrupt("return");case 14:if(!0!==e.form.send){a.next=18;break}if(""!==e.form.address){a.next=18;break}return e.$message.error("请填写企业微信通知地址"),a.abrupt("return");case 18:(0,c.GW)(e.form).then((function(a){a.data.hasOwnProperty("name")&&e.$message.error("工程名称已存在"),"success"===a.data.message&&(e.$message.success("项目修改成功"),e.$router.push("/font_list")),"faild"===a.data.message&&e.$message.error("添加失败请检查")})).catch((function(a){e.$message.error("服务器错误")}));case 19:case"end":return a.stop()}}),a)})))()},clearValidate:function(e){this.$refs["form"].clearValidate(e)},resetForm:function(e){this.$refs[e].resetFields()},editorInit:function(){r(5335),r(8230),r(2213),r(6345)},getData:function(){var e=this;return(0,n.Z)(regeneratorRuntime.mark((function a(){var r,t,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,(0,c.Kq)({id:e.id});case 2:r=a.sent,e.form=r.data,t=e.form.build,o=JSON.parse(t),e.setup_content=o["setup"],e.teardown_content=o["teardown"];case 8:case"end":return a.stop()}}),a)})))()}}},s=i,l=r(1001),m=(0,l.Z)(s,t,o,!1,null,"6526e627",null),u=m.exports},2213:function(){ace.define("ace/theme/monokai",["require","exports","module","ace/lib/dom"],(function(e,a,r){a.isDark=!0,a.cssClass="ace-monokai",a.cssText=".ace-monokai .ace_gutter {background: #2F3129;color: #8F908A}.ace-monokai .ace_print-margin {width: 1px;background: #555651}.ace-monokai {background-color: #272822;color: #F8F8F2}.ace-monokai .ace_cursor {color: #F8F8F0}.ace-monokai .ace_marker-layer .ace_selection {background: #49483E}.ace-monokai.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px #272822;}.ace-monokai .ace_marker-layer .ace_step {background: rgb(102, 82, 0)}.ace-monokai .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid #49483E}.ace-monokai .ace_marker-layer .ace_active-line {background: #202020}.ace-monokai .ace_gutter-active-line {background-color: #272727}.ace-monokai .ace_marker-layer .ace_selected-word {border: 1px solid #49483E}.ace-monokai .ace_invisible {color: #52524d}.ace-monokai .ace_entity.ace_name.ace_tag,.ace-monokai .ace_keyword,.ace-monokai .ace_meta.ace_tag,.ace-monokai .ace_storage {color: #F92672}.ace-monokai .ace_punctuation,.ace-monokai .ace_punctuation.ace_tag {color: #fff}.ace-monokai .ace_constant.ace_character,.ace-monokai .ace_constant.ace_language,.ace-monokai .ace_constant.ace_numeric,.ace-monokai .ace_constant.ace_other {color: #AE81FF}.ace-monokai .ace_invalid {color: #F8F8F0;background-color: #F92672}.ace-monokai .ace_invalid.ace_deprecated {color: #F8F8F0;background-color: #AE81FF}.ace-monokai .ace_support.ace_constant,.ace-monokai .ace_support.ace_function {color: #66D9EF}.ace-monokai .ace_fold {background-color: #A6E22E;border-color: #F8F8F2}.ace-monokai .ace_storage.ace_type,.ace-monokai .ace_support.ace_class,.ace-monokai .ace_support.ace_type {font-style: italic;color: #66D9EF}.ace-monokai .ace_entity.ace_name.ace_function,.ace-monokai .ace_entity.ace_other,.ace-monokai .ace_entity.ace_other.ace_attribute-name,.ace-monokai .ace_variable {color: #A6E22E}.ace-monokai .ace_variable.ace_parameter {font-style: italic;color: #FD971F}.ace-monokai .ace_string {color: #E6DB74}.ace-monokai .ace_comment {color: #75715E}.ace-monokai .ace_indent-guide {background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWPQ0FD0ZXBzd/wPAAjVAoxeSgNeAAAAAElFTkSuQmCC) right repeat-y}";var t=e("../lib/dom");t.importCssString(a.cssText,a.cssClass)}))}}]);
//# sourceMappingURL=557-legacy.f06edfb9.js.map