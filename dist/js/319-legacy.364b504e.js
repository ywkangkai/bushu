(self["webpackChunkvue_admin"]=self["webpackChunkvue_admin"]||[]).push([[319],{2319:function(r,e,t){"use strict";t.r(e),t.d(e,{default:function(){return m}});var n=function(){var r=this,e=r.$createElement,t=r._self._c||e;return t("div",{staticClass:"login-wrap"},[t("div",{staticClass:"ms-login"},[t("div",{staticClass:"ms-title"},[r._v("用户注册")]),t("el-form",{ref:"ruleForm",staticClass:"ms-content",attrs:{model:r.ruleForm,rules:r.rules}},[t("el-form-item",{attrs:{prop:"username",error:r.err_username_msg}},[t("el-input",{attrs:{placeholder:"请输入用户名",clearable:""},on:{focus:function(e){return r.clearValidate("username")}},model:{value:r.ruleForm.username,callback:function(e){r.$set(r.ruleForm,"username",e)},expression:"ruleForm.username"}},[t("el-button",{attrs:{slot:"prepend",icon:"el-icon-lx-people"},slot:"prepend"})],1)],1),t("el-form-item",{attrs:{prop:"email",error:r.err_email_msg}},[t("el-input",{attrs:{placeholder:"请输入邮箱",clearable:""},on:{focus:function(e){return r.clearValidate("email")}},model:{value:r.ruleForm.email,callback:function(e){r.$set(r.ruleForm,"email",e)},expression:"ruleForm.email"}},[t("el-button",{attrs:{slot:"prepend",icon:"el-icon-lx-mail"},slot:"prepend"})],1)],1),t("el-form-item",{attrs:{prop:"password"}},[t("el-input",{attrs:{type:"password",placeholder:"请输入密码"},on:{focus:function(e){return r.clearValidate("password")}},model:{value:r.ruleForm.password,callback:function(e){r.$set(r.ruleForm,"password",e)},expression:"ruleForm.password"}},[t("el-button",{attrs:{slot:"prepend",icon:"el-icon-lx-lock"},slot:"prepend"})],1)],1),t("el-form-item",{attrs:{prop:"password_confirm"}},[t("el-input",{attrs:{type:"password",placeholder:"请输入确认密码"},on:{focus:function(e){return r.clearValidate("password_confirm")}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&r._k(e.keyCode,"enter",13,e.key,"Enter")?null:r.submitForm("ruleForm")}},model:{value:r.ruleForm.password_confirm,callback:function(e){r.$set(r.ruleForm,"password_confirm",e)},expression:"ruleForm.password_confirm"}},[t("el-button",{attrs:{slot:"prepend",icon:"el-icon-lx-lock"},slot:"prepend"})],1)],1),t("el-link",{staticClass:"register_link",attrs:{type:"info",underline:!1,href:"/login"}},[r._v("已有账号？点击登录")]),t("div",{staticClass:"login-btn"},[t("el-button",{attrs:{type:"primary"},on:{click:function(e){return r.submitForm("ruleForm")}}},[r._v("注册")])],1),t("p",{directives:[{name:"show",rawName:"v-show",value:r.err_info,expression:"err_info"}],staticClass:"login-tips"},[r._v(r._s(r.err_msg))])],1)],1)])},o=[],s=t(6198),a=(t(5666),t(1703),t(4916),t(7601),t(9106)),i={data:function(){var r=this,e=function(){var e=(0,s.Z)(regeneratorRuntime.mark((function e(t,n,o){var s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s=n.length,r.err_username_msg="",!(s<6||s>20)){e.next=6;break}o(new Error("用户名最少6位，最多20位")),e.next=16;break;case 6:return e.prev=6,e.next=9,(0,a.Zn)(n);case 9:i=e.sent,i.data.count>0?r.err_username_msg="用户名已存在":o(),e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](6),e.t0.response?(r.err_username_msg="服务器错误",console.log(e.t0.response.data),console.log(e.t0.response.status),console.log(e.t0.response.headers)):e.t0.request?(r.err_username_msg=e.t0.request,console.log(e.t0.request)):(r.err_username_msg=e.t0.message,console.log("Error",e.t0.message));case 16:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(r,t,n){return e.apply(this,arguments)}}(),t=function(){var e=(0,s.Z)(regeneratorRuntime.mark((function e(t,n,o){var s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r.err_email_msg="",s=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,i=s.test(n.toLowerCase()),i?(0,a.Zj)(n).then((function(e){e.data.count>0?r.err_email_msg="邮箱已存在":o()})).catch((function(e){e.response?(r.err_email_msg="服务器错误",console.log(e.response.data),console.log(e.response.status),console.log(e.response.headers)):e.request?(r.err_email_msg=e.request,console.log(e.request)):(r.err_email_msg=e.message,console.log("Error",e.message))})):o(new Error("请输入合法的邮箱地址"));case 4:case"end":return e.stop()}}),e)})));return function(r,t,n){return e.apply(this,arguments)}}(),n=function(e,t,n){var o=t.length;o<6||o>20?n(new Error("密码最少6位，最多20位")):(""!==r.ruleForm.password_confirm&&r.$refs.ruleForm.validateField("password_confirm"),n())},o=function(e,t,n){""===t?n(new Error("请输入确认密码")):t!==r.ruleForm.password?n(new Error("两次输入的密码不一致")):n()};return{ruleForm:{username:"",email:"",password:"",password_confirm:""},err_info:!1,err_msg:"",err_username_msg:"",err_email_msg:"",rules:{username:[{validator:e,trigger:"blur"}],email:[{validator:t,trigger:"blur"}],password:[{validator:n,trigger:"blur"}],password_confirm:[{validator:o,trigger:"blur"}]}}},methods:{submitForm:function(r){var e=this;this.$refs[r].validate((function(r){if(!r)return e.err_msg="参数有误",e.err_info=!0,!1;(0,a.z2)(e.ruleForm).then((function(r){sessionStorage.clear(),localStorage.clear(),localStorage.token=r.data.token,localStorage.username=r.data.username,localStorage.user_id=r.data.id,e.$router.push({name:"index"})})).catch((function(r){"non_field_errors"in r&&400===r.status_code&&(e.err_msg="用户名或密码错误"),r.response?e.err_msg="服务器异常":r.request&&(e.err_msg="网络异常"),e.err_info=!0}))}))},clearValidate:function(r){this.$refs["ruleForm"].clearValidate(r)}}},u=i,l=t(1001),c=(0,l.Z)(u,n,o,!1,null,"0aebeee4",null),m=c.exports},7741:function(r,e,t){var n=t(1702),o=n("".replace),s=function(r){return String(Error(r).stack)}("zxcasd"),a=/\n\s*at [^:]*:[^\n]*/,i=a.test(s);r.exports=function(r,e){if(i&&"string"==typeof r)while(e--)r=o(r,a,"");return r}},2914:function(r,e,t){var n=t(7293),o=t(9114);r.exports=!n((function(){var r=Error("a");return!("stack"in r)||(Object.defineProperty(r,"stack",o(1,7)),7!==r.stack)}))},9587:function(r,e,t){var n=t(614),o=t(111),s=t(7674);r.exports=function(r,e,t){var a,i;return s&&n(a=e.constructor)&&a!==t&&o(i=a.prototype)&&i!==t.prototype&&s(r,i),r}},8340:function(r,e,t){var n=t(111),o=t(8880);r.exports=function(r,e){n(e)&&"cause"in e&&o(r,"cause",e.cause)}},6277:function(r,e,t){var n=t(1340);r.exports=function(r,e){return void 0===r?arguments.length<2?"":e:n(r)}},9191:function(r,e,t){"use strict";var n=t(5005),o=t(2597),s=t(8880),a=t(7976),i=t(7674),u=t(9920),l=t(9587),c=t(6277),m=t(8340),p=t(7741),f=t(2914),d=t(1913);r.exports=function(r,e,t,g){var _=g?2:1,v=r.split("."),h=v[v.length-1],w=n.apply(null,v);if(w){var k=w.prototype;if(!d&&o(k,"cause")&&delete k.cause,!t)return w;var b=n("Error"),x=e((function(r,e){var t=c(g?e:r,void 0),n=g?new w(r):new w;return void 0!==t&&s(n,"message",t),f&&s(n,"stack",p(n.stack,2)),this&&a(k,this)&&l(n,this,x),arguments.length>_&&m(n,arguments[_]),n}));if(x.prototype=k,"Error"!==h&&(i?i(x,b):u(x,b,{name:!0})),u(x,w),!d)try{k.name!==h&&s(k,"name",h),k.constructor=x}catch(F){}return x}}},1703:function(r,e,t){var n=t(2109),o=t(7854),s=t(2104),a=t(9191),i="WebAssembly",u=o[i],l=7!==Error("e",{cause:7}).cause,c=function(r,e){var t={};t[r]=a(r,e,l),n({global:!0,forced:l},t)},m=function(r,e){if(u&&u[r]){var t={};t[r]=a(i+"."+r,e,l),n({target:i,stat:!0,forced:l},t)}};c("Error",(function(r){return function(e){return s(r,this,arguments)}})),c("EvalError",(function(r){return function(e){return s(r,this,arguments)}})),c("RangeError",(function(r){return function(e){return s(r,this,arguments)}})),c("ReferenceError",(function(r){return function(e){return s(r,this,arguments)}})),c("SyntaxError",(function(r){return function(e){return s(r,this,arguments)}})),c("TypeError",(function(r){return function(e){return s(r,this,arguments)}})),c("URIError",(function(r){return function(e){return s(r,this,arguments)}})),m("CompileError",(function(r){return function(e){return s(r,this,arguments)}})),m("LinkError",(function(r){return function(e){return s(r,this,arguments)}})),m("RuntimeError",(function(r){return function(e){return s(r,this,arguments)}}))}}]);
//# sourceMappingURL=319-legacy.364b504e.js.map