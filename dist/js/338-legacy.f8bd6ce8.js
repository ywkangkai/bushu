(self["webpackChunkvue_admin"]=self["webpackChunkvue_admin"]||[]).push([[338],{6338:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"table"},[n("div",{staticClass:"crumbs"},[n("el-breadcrumb",{attrs:{separator:"/"}},[n("el-breadcrumb-item",[n("i",{staticClass:"el-icon-lx-calendar"}),e._v(" 接口管理")]),n("el-breadcrumb-item",[e._v("接口列表")])],1)],1),n("div",{staticClass:"container"},[n("div",{staticClass:"handle-box"},[n("el-button",{staticClass:"handle-del mr10",attrs:{type:"primary",icon:"el-icon-delete"},on:{click:e.delAll}},[e._v("批量删除")]),n("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"输入筛选关键词"},model:{value:e.select_word,callback:function(t){e.select_word=t},expression:"select_word"}}),n("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")])],1),n("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.tableData,border:"",stripe:""},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),n("el-table-column",{attrs:{type:"index",label:"序号",width:"55",align:"center"}}),n("el-table-column",{attrs:{prop:"name",label:"接口名称",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-popover",{attrs:{trigger:"hover",placement:"top"}},[n("p",[e._v("接口名: "+e._s(t.row.name))]),n("p",[e._v("用例数: "+e._s(t.row.testcases))]),n("p",[e._v("配置数: "+e._s(t.row.configures))]),n("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[n("el-tag",{attrs:{size:"medium"}},[e._v(e._s(t.row.name))])],1)])]}}])}),n("el-table-column",{attrs:{prop:"desc",label:"描述",width:"100",align:"center"}}),n("el-table-column",{attrs:{prop:"tester",label:"测试人员",width:"100",align:"center"}}),n("el-table-column",{attrs:{prop:"project",label:"所属项目",width:"250"}}),n("el-table-column",{attrs:{prop:"create_time",label:"创建时间",sortable:"",align:"center"}}),n("el-table-column",{attrs:{prop:"update_time",label:"更新时间",sortable:"",align:"center"}}),n("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(n){return e.handleRun(t.$index,t.row)}}},[e._v("运行")]),n("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(n){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),n("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(n){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),n("div",{staticClass:"pagination"},[n("el-pagination",{attrs:{background:"","page-sizes":[4,5,8,10,20],layout:"total, sizes, prev, pager, next, jumper",total:e.total_nums,"page-size":e.page_size},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})],1)],1),n("el-dialog",{attrs:{title:"编辑接口",visible:e.editVisible,width:"30%",center:""},on:{"update:visible":function(t){e.editVisible=t}}},[n("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px"}},[n("el-form-item",{attrs:{label:"接口名称"}},[n("el-input",{attrs:{clearable:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),n("el-form-item",{attrs:{label:"测试人员"}},[n("el-input",{attrs:{clearable:""},model:{value:e.form.tester,callback:function(t){e.$set(e.form,"tester",t)},expression:"form.tester"}})],1),n("el-form-item",{attrs:{label:"所属项目"}},[n("el-input",{attrs:{disabled:""},model:{value:e.form.project,callback:function(t){e.$set(e.form,"project",t)},expression:"form.project"}})],1),n("el-form-item",{attrs:{label:"简要描述"}},[n("el-input",{attrs:{clearable:""},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.editVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.saveEdit}},[e._v("确 定")])],1)],1),n("el-dialog",{attrs:{title:"删除接口",visible:e.delVisible,width:"300px",center:""},on:{"update:visible":function(t){e.delVisible=t}}},[n("div",{staticClass:"del-dialog-cnt"},[e._v("删除不可恢复，是否确定删除？")]),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.delVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.deleteRow}},[e._v("确 定")])],1)]),n("el-dialog",{attrs:{title:"运行接口",visible:e.runVisible,width:"30%",center:""},on:{"update:visible":function(t){e.runVisible=t}}},[n("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px"}},[n("el-form-item",{attrs:{label:"运行环境"}},[n("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.env_id,callback:function(t){e.env_id=t},expression:"env_id"}},e._l(e.envs_id_names,(function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.runVisible=!1}}},[e._v("取 消")]),n("el-button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{type:"primary"},on:{click:e.openFullScreen1}},[e._v("运行")])],1)],1)],1)},a=[],i=n(6198),l=n(3019),s=(n(5666),n(2552)),o={name:"basetable",data:function(){return{tableData:[],cur_page:1,page_size:10,total_nums:1,multipleSelection:[],select_word:"",del_list:[],editVisible:!1,delVisible:!1,runVisible:!1,form:{},project_idx:-1,project_id:-1,idx:-1,id:-1,env_id:"",envs_id_names:[],fullscreenLoading:!1}},created:function(){this.getData(),this.getEnvsIdNames()},methods:{handleCurrentChange:function(e){this.cur_page=e,this.getData()},handleSizeChange:function(e){this.page_size=e,this.getData()},getData:function(){var e=this;(0,s.FP)({page:this.cur_page,size:this.page_size}).then((function(t){e.tableData=t.data.results,e.cur_page=t.data.current_page_num||1,e.total_nums=t.data.count||1}))},search:function(){var e=this;(0,s.Zf)({name:this.select_word}).then((function(t){e.tableData=t.data.results}))},formatter:function(e,t){return e.address},filterTag:function(e,t){return t.tag===e},handleEdit:function(e,t){this.idx=e,this.id=t.id,this.form=(0,l.Z)({},t),this.editVisible=!0},handleRun:function(e,t){this.idx=e,this.id=t.id,this.form=t,this.runVisible=!0},handleDelete:function(e,t){this.idx=e,this.id=t.id,this.delVisible=!0},delAll:function(){var e=this;(0,s.AZ)({idlist:this.del_list}).then((function(t){e.$message.success("删除成功"),e.tableData=t.data.results})).catch((function(t){e.$message.error("服务器错误")}))},handleSelectionChange:function(e){for(var t=e,n=[],r=0;r<t.length;r++)n.push(t[r]["id"]);this.del_list=n},saveEdit:function(){var e=this;return(0,i.Z)(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=Object.assign({},e.form),delete n.project,t.next=4,(0,s.WD)(e.id,n);case 4:r=t.sent;try{r.data.hasOwnProperty("name")?e.$message.error("接口名称已存在"):(e.$message.success("修改成功"),e.tableData=r.data.results,e.editVisible=!1)}catch(a){e.editVisible=!1,e.$message.error("服务器错误")}case 6:case"end":return t.stop()}}),t)})))()},deleteRow:function(){var e=this;(0,s.nq)(this.id).then((function(t){e.$message.success("删除成功"),e.delVisible=!1,e.tableData=t.data.results,e.cur_page=t.data.current_page_num||1,e.total_nums=t.data.count||1})).catch((function(t){e.$message.error("服务器错误")}))},getEnvsIdNames:function(){var e=this;(0,s.PT)().then((function(t){e.envs_id_names=t.data})).catch((function(t){e.$message.error("服务器错误")}))},open:function(e){var t=this;this.$confirm("用例执行完成，是否前往查看报告?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$router.push({path:"/reports_view/".concat(e.data.id)})})).catch((function(){}))},openFullScreen1:function(){var e=this;return(0,i.Z)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""!==e.env_id){t.next=4;break}e.$message.error("请选择运行环境"),t.next=16;break;case 4:return e.runVisible=!1,e.fullscreenLoading=!0,t.next=8,(0,s.tK)({iid:e.id,env_id:e.env_id});case 8:if(n=t.sent,console.log(n),"当前接口不存在用例无法运行"!==n.data.message){t.next=15;break}return console.log("xxxxxxxxxxxxxx"),e.fullscreenLoading=!1,e.$message.error("当前接口未添加用例无法执行"),t.abrupt("return");case 15:n.status,e.fullscreenLoading=!1,e.open(n);case 16:case"end":return t.stop()}}),t)})))()}}},c=o,u=n(1001),d=(0,u.Z)(c,r,a,!1,null,"5bd8f1a4",null),f=d.exports},8533:function(e,t,n){"use strict";var r=n(2092).forEach,a=n(9341),i=a("forEach");e.exports=i?[].forEach:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}},1194:function(e,t,n){var r=n(7293),a=n(5112),i=n(7392),l=a("species");e.exports=function(e){return i>=51||!r((function(){var t=[],n=t.constructor={};return n[l]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},9341:function(e,t,n){"use strict";var r=n(7293);e.exports=function(e,t){var n=[][e];return!!n&&r((function(){n.call(null,t||function(){return 1},1)}))}},7327:function(e,t,n){"use strict";var r=n(2109),a=n(2092).filter,i=n(1194),l=i("filter");r({target:"Array",proto:!0,forced:!l},{filter:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})},5003:function(e,t,n){var r=n(2109),a=n(7293),i=n(5656),l=n(1236).f,s=n(9781),o=a((function(){l(1)})),c=!s||o;r({target:"Object",stat:!0,forced:c,sham:!s},{getOwnPropertyDescriptor:function(e,t){return l(i(e),t)}})},9337:function(e,t,n){var r=n(2109),a=n(9781),i=n(3887),l=n(5656),s=n(1236),o=n(6135);r({target:"Object",stat:!0,sham:!a},{getOwnPropertyDescriptors:function(e){var t,n,r=l(e),a=s.f,c=i(r),u={},d=0;while(c.length>d)n=a(r,t=c[d++]),void 0!==n&&o(u,t,n);return u}})},7941:function(e,t,n){var r=n(2109),a=n(7908),i=n(1956),l=n(7293),s=l((function(){i(1)}));r({target:"Object",stat:!0,forced:s},{keys:function(e){return i(a(e))}})},4747:function(e,t,n){var r=n(7854),a=n(8324),i=n(8509),l=n(8533),s=n(8880),o=function(e){if(e&&e.forEach!==l)try{s(e,"forEach",l)}catch(t){e.forEach=l}};for(var c in a)a[c]&&o(r[c]&&r[c].prototype);o(i)},3019:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});n(7941),n(2526),n(7327),n(1539),n(5003),n(4747),n(9337);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}}}]);
//# sourceMappingURL=338-legacy.f8bd6ce8.js.map