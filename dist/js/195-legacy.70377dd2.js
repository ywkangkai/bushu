(self["webpackChunkvue_admin"]=self["webpackChunkvue_admin"]||[]).push([[195],{9195:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return f}});var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"table"},[n("div",{staticClass:"crumbs"},[n("el-breadcrumb",{attrs:{separator:"/"}},[n("el-breadcrumb-item",[n("i",{staticClass:"el-icon-lx-calendar"}),t._v(" CICD")]),n("el-breadcrumb-item",[t._v("工程列表")])],1)],1),n("div",{staticClass:"container"},[n("div",{staticClass:"handle-box"},[n("el-button",{staticClass:"handle-del mr10",attrs:{type:"primary",icon:"el-icon-delete"},on:{click:t.delAll}},[t._v("批量删除")]),n("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"按工程名称搜索"},model:{value:t.select_word,callback:function(e){t.select_word=e},expression:"select_word"}}),n("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.search}},[t._v("搜索")])],1),n("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:t.tableData,border:"",stripe:""},on:{"selection-change":t.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),n("el-table-column",{attrs:{type:"index",label:"序号",width:"55",align:"center"}}),n("el-table-column",{attrs:{prop:"name",label:"工程名称",width:"250"}}),n("el-table-column",{attrs:{prop:"git",label:"git仓库",width:"250"}}),n("el-table-column",{attrs:{prop:"server",label:"服务地址",width:"250"}}),n("el-table-column",{attrs:{prop:"type",label:"工程类型",width:"100",align:"center"}}),n("el-table-column",{attrs:{prop:"send",label:"是否发送通知",width:"100",align:"center"}}),n("el-table-column",{attrs:{prop:"address",label:"企业微信地址",width:"100",align:"center"}}),n("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.normal?n("el-button",{attrs:{type:"text",icon:"el-icon-refresh-right"},on:{click:function(n){return t.handleBuild(e.$index,e.row)}}},[t._v("构建")]):t._e(),t.build?n("el-button",{attrs:{type:"text"},on:{click:function(n){return t.handleBuild(e.$index,e.row)}}},[n("i",{staticClass:"el-icon-loading"}),t._v("构建")]):t._e(),n("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(n){return t.linkTo(e.row.id)}}},[t._v("编辑")]),n("el-button",{attrs:{type:"text",icon:"el-icon-view"},on:{click:t.views}},[t._v("详情")]),n("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(n){return t.handleDelete(e.$index,e.row)}}},[t._v("删除")]),n("el-dialog",{attrs:{title:"构建流程",visible:t.dialogVisible,width:"80%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("el-steps",{attrs:{"align-center":""}},[n("el-step",{attrs:{status:e.row.status.git_status1,title:e.row.status.git,icon:"el-icon-loading",description:e.row.status.git_description}}),n("el-step",{attrs:{status:e.row.status.build_before_status2,title:e.row.status.build_before,icon:"el-icon-loading",description:e.row.status.build_before_description}}),n("el-step",{attrs:{status:e.row.status.structure_status3,title:e.row.status.structure,icon:"el-icon-loading",description:e.row.status.structure_description}}),n("el-step",{attrs:{status:e.row.status.build_after_status4,title:e.row.status.build_after,icon:"el-icon-loading",description:e.row.status.build_after_description}})],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"})],1)]}}])})],1),n("div",{staticClass:"pagination"},[n("el-pagination",{attrs:{background:"","page-sizes":[4,5,8,10,20],layout:"total, sizes, prev, pager, next, jumper",total:t.total_nums,"page-size":t.page_size},on:{"current-change":t.handleCurrentChange,"size-change":t.handleSizeChange}})],1)],1),n("el-dialog",{attrs:{title:"删除接口",visible:t.delVisible,width:"300px",center:""},on:{"update:visible":function(e){t.delVisible=e}}},[n("div",{staticClass:"del-dialog-cnt"},[t._v("删除不可恢复，是否确定删除？")]),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.delVisible=!1}}},[t._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:t.deleteRow}},[t._v("确 定")])],1)])],1)},i=[],o=n(6198),u=(n(5666),n(6750),n(8450),n(4916),n(8386),n(9714),n(7601),n(2552)),c={name:"basetable",data:function(){return{tableData:[],cur_page:1,page_size:10,total_nums:1,multipleSelection:[],select_word:"",del_list:[],editVisible:!1,delVisible:!1,runVisible:!1,form:{},idx:-1,id:-1,env_id:"",envs_id_names:[],fullscreenLoading:!1,normal:!0,build:!1,is_build:!1,dialogVisible:!1,active:1,git:"",build_before:"",structure:"",build_after:"",git_status1:"",build_before_status2:"",structure_status3:"",build_after_status4:"",git_description:"",build_before_description:"",structure_description:"",build_after_description:""}},created:function(){this.getData()},methods:{handleCurrentChange:function(t){this.cur_page=t,this.getData()},handleSizeChange:function(t){this.page_size=t,this.getData()},getData:function(){var t=this;(0,u.Kh)({page:this.cur_page,size:this.page_size}).then((function(e){t.tableData=e.data.results,t.cur_page=e.data.current_page_num||1,t.total_nums=e.data.count||1}))},search:function(){var t=this;(0,u.lO)({name:this.select_word}).then((function(e){t.tableData=e.data.results}))},formatter:function(t,e){return t.address},filterTag:function(t,e){return e.tag===t},handleEdit:function(t,e){this.idx=t,this.id=e.id,this.form=e,this.editVisible=!0},handleBuild:function(t,e){var n=this;return(0,o.Z)(regeneratorRuntime.mark((function r(){var i,o,c,a,s,l;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!0!==n.build){r.next=5;break}return n.$message.warning("当前已有任务在构建中, 请稍等......"),r.abrupt("return");case 5:n.$message.info("任务构建已开始，请在详情中查看......"),n.build=!0,n.normal=!1,n.idx=t,n.id=e.id,e.status.git_status1="finish",e.status.git="进行中",e.status.git_description="正在拉取代码",e.status.build_before_status2="wait",e.status.build_before_description="未开始";case 15:return r.next=17,(0,u.RD)({id:n.id});case 17:if(i=r.sent,o=new RegExp("文件夹"),c=o.test(i.data.message),a=new RegExp("already exists and is not an empty directory"),s=a.test(i.data.message),"项目拉取完成"!==i.data.message){r.next=33;break}e.status.git_status1="success",e.status.build_before_status2="finish",e.status.git="已完成",e.status.build_before="进行中",e.status.git_description="代码已存在服务区指定路径中",e.status.build_before_description="执行构建步骤",n.normal=!0,n.build=!1,r.next=57;break;case 33:if("服务器链接失败"!==i.data.message){r.next=42;break}return e.status.git_status1="error",e.status.git="已完成",e.status.git_description="服务器链接失败",n.normal=!0,n.build=!1,r.abrupt("return");case 42:if(!c){r.next=51;break}return e.status.git_status1="error",e.status.git="已完成",e.status.git_description=i.data.message,n.normal=!0,n.build=!1,r.abrupt("return");case 51:if(!s){r.next=57;break}return e.status.git_status1="error",e.status.git="已完成",e.status.git_description=i.data.message,n.normal=!0,r.abrupt("return");case 57:return r.next=59,(0,u.QG)({id:n.id});case 59:l=r.sent,"构建前步骤执行完成"===l.data.message?(e.status.build_before_status2="success",e.status.build_before="已完成",e.status.build_before_description="构建前步骤执行完成",e.status.build_after="进行中",e.status.build_after_status4="finish",e.status.build_after_description="执行构建后操作"):"服务器链接失败"===l.data.message?(e.status.build_before_status2="error",e.status.build_before="已完成",e.status.build_before_description="服务器链接失败"):"构建前步骤失败"===l.data.message&&(e.status.build_before_status2="error",e.status.build_before="已完成",e.status.build_before_description="构建前步骤执行失败");case 61:case"end":return r.stop()}}),r)})))()},handleDelete:function(t,e){this.idx=t,this.id=e.id,this.delVisible=!0},delAll:function(){var t=this;(0,u.tc)({idlist:this.del_list}).then((function(e){t.$message.success("删除成功"),t.tableData=e.data.results})).catch((function(e){t.$message.error("服务器错误")}))},handleSelectionChange:function(t){for(var e=t,n=[],r=0;r<e.length;r++)n.push(e[r]["id"]);this.del_list=n},deleteRow:function(){var t=this;(0,u.cQ)(this.id).then((function(e){t.$message.success("删除成功"),t.delVisible=!1,t.tableData=e.data.results,t.cur_page=e.data.current_page_num||1,t.total_nums=e.data.count||1})).catch((function(e){t.$message.error("服务器错误")}))},linkTo:function(t){this.$router.push({path:"/font_edit/".concat(t)})},handleClose:function(t){t()},views:function(){this.dialogVisible=!0}}},a=c,s=n(1001),l=(0,s.Z)(a,r,i,!1,null,"6b8a7f96",null),f=l.exports},9587:function(t,e,n){var r=n(614),i=n(111),o=n(7674);t.exports=function(t,e,n){var u,c;return o&&r(u=e.constructor)&&u!==n&&i(c=u.prototype)&&c!==n.prototype&&o(t,c),t}},6750:function(t,e,n){var r=n(9781),i=n(7854),o=n(1702),u=n(4705),c=n(9587),a=n(8880),s=n(3070).f,l=n(8006).f,f=n(7976),d=n(7850),p=n(1340),g=n(7066),b=n(2999),_=n(1320),h=n(7293),m=n(2597),v=n(9909).enforce,w=n(6340),x=n(5112),y=n(9441),k=n(7168),C=x("match"),z=i.RegExp,R=z.prototype,E=i.SyntaxError,D=o(g),j=o(R.exec),S=o("".charAt),V=o("".replace),$=o("".indexOf),T=o("".slice),A=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,I=/a/g,O=/a/g,K=new z(I)!==I,L=b.MISSED_STICKY,q=b.UNSUPPORTED_Y,B=r&&(!K||L||y||k||h((function(){return O[C]=!1,z(I)!=I||z(O)==O||"/a/i"!=z(I,"i")}))),G=function(t){for(var e,n=t.length,r=0,i="",o=!1;r<=n;r++)e=S(t,r),"\\"!==e?o||"."!==e?("["===e?o=!0:"]"===e&&(o=!1),i+=e):i+="[\\s\\S]":i+=e+S(t,++r);return i},P=function(t){for(var e,n=t.length,r=0,i="",o=[],u={},c=!1,a=!1,s=0,l="";r<=n;r++){if(e=S(t,r),"\\"===e)e+=S(t,++r);else if("]"===e)c=!1;else if(!c)switch(!0){case"["===e:c=!0;break;case"("===e:j(A,T(t,r+1))&&(r+=2,a=!0),i+=e,s++;continue;case">"===e&&a:if(""===l||m(u,l))throw new E("Invalid capture group name");u[l]=!0,o[o.length]=[l,s],a=!1,l="";continue}a?l+=e:i+=e}return[i,o]};if(u("RegExp",B)){for(var Q=function(t,e){var n,r,i,o,u,s,l=f(R,this),g=d(t),b=void 0===e,_=[],h=t;if(!l&&g&&b&&t.constructor===Q)return t;if((g||f(R,t))&&(t=t.source,b&&(e="flags"in h?h.flags:D(h))),t=void 0===t?"":p(t),e=void 0===e?"":p(e),h=t,y&&"dotAll"in I&&(r=!!e&&$(e,"s")>-1,r&&(e=V(e,/s/g,""))),n=e,L&&"sticky"in I&&(i=!!e&&$(e,"y")>-1,i&&q&&(e=V(e,/y/g,""))),k&&(o=P(t),t=o[0],_=o[1]),u=c(z(t,e),l?this:R,Q),(r||i||_.length)&&(s=v(u),r&&(s.dotAll=!0,s.raw=Q(G(t),n)),i&&(s.sticky=!0),_.length&&(s.groups=_)),t!==h)try{a(u,"source",""===h?"(?:)":h)}catch(m){}return u},Z=function(t){t in Q||s(Q,t,{configurable:!0,get:function(){return z[t]},set:function(e){z[t]=e}})},W=l(z),M=0;W.length>M;)Z(W[M++]);R.constructor=Q,Q.prototype=R,_(i,"RegExp",Q)}w("RegExp")},8450:function(t,e,n){var r=n(7854),i=n(9781),o=n(9441),u=n(4326),c=n(3070).f,a=n(9909).get,s=RegExp.prototype,l=r.TypeError;i&&o&&c(s,"dotAll",{configurable:!0,get:function(){if(this!==s){if("RegExp"===u(this))return!!a(this).dotAll;throw l("Incompatible receiver, RegExp required")}}})},8386:function(t,e,n){var r=n(7854),i=n(9781),o=n(2999).MISSED_STICKY,u=n(4326),c=n(3070).f,a=n(9909).get,s=RegExp.prototype,l=r.TypeError;i&&o&&c(s,"sticky",{configurable:!0,get:function(){if(this!==s){if("RegExp"===u(this))return!!a(this).sticky;throw l("Incompatible receiver, RegExp required")}}})},9714:function(t,e,n){"use strict";var r=n(1702),i=n(6530).PROPER,o=n(1320),u=n(9670),c=n(7976),a=n(1340),s=n(7293),l=n(7066),f="toString",d=RegExp.prototype,p=d[f],g=r(l),b=s((function(){return"/a/b"!=p.call({source:"a",flags:"b"})})),_=i&&p.name!=f;(b||_)&&o(RegExp.prototype,f,(function(){var t=u(this),e=a(t.source),n=t.flags,r=a(void 0===n&&c(d,t)&&!("flags"in d)?g(t):n);return"/"+e+"/"+r}),{unsafe:!0})},2552:function(t,e,n){"use strict";n.d(e,{$8:function(){return et},$q:function(){return G},AH:function(){return ct},AZ:function(){return v},B:function(){return f},Bx:function(){return I},Cs:function(){return X},DC:function(){return $},Dr:function(){return lt},FP:function(){return _},G3:function(){return J},GL:function(){return ft},GW:function(){return wt},IG:function(){return b},KL:function(){return nt},Kh:function(){return mt},Kq:function(){return vt},L$:function(){return l},LO:function(){return C},Lu:function(){return F},NM:function(){return ot},NV:function(){return a},NW:function(){return j},OM:function(){return tt},PT:function(){return x},QG:function(){return zt},RB:function(){return S},RD:function(){return Ct},RQ:function(){return D},Sp:function(){return _t},TR:function(){return Y},Tg:function(){return at},Tj:function(){return bt},Vx:function(){return B},W7:function(){return M},WD:function(){return h},XC:function(){return Z},Z4:function(){return P},ZH:function(){return K},Zf:function(){return w},_X:function(){return p},ah:function(){return it},aj:function(){return k},ay:function(){return V},cQ:function(){return xt},cu:function(){return pt},d9:function(){return u},ei:function(){return ut},iO:function(){return z},ie:function(){return R},in:function(){return W},jJ:function(){return g},jh:function(){return ht},kJ:function(){return dt},kq:function(){return H},lO:function(){return kt},n:function(){return d},nL:function(){return E},nk:function(){return A},nq:function(){return m},ny:function(){return q},o:function(){return T},pU:function(){return N},pW:function(){return gt},s2:function(){return st},tK:function(){return y},tc:function(){return yt},th:function(){return s},vi:function(){return rt},vj:function(){return L},x4:function(){return c},xQ:function(){return O},yr:function(){return Q},z:function(){return U}});var r=n(4206),i=n.n(r),o="http://kk.uoyo.net:8080",u=function(t){return i().get("".concat(o,"/project/list/?page=")+t.page+"&size="+t.size,t)},c=function(t){return i().post("".concat(o,"/project/detail/"),t)},a=function(t,e){return i().put("".concat(o,"/project/edit/")+t+"/",e)},s=function(t){return i()["delete"]("".concat(o,"/project/delete/")+t+"/")},l=function(t){return i().post("".concat(o,"/project/deleteall/"),t)},f=function(t){return i().post("".concat(o,"/project/add/"),t)},d=function(){return i().get("".concat(o,"/interface/project/name"))},p=function(){return i().get("".concat(o,"/project/get/env/"))},g=function(t){return i().post("".concat(o,"/project/run/"),t)},b=function(t){return i().post("".concat(o,"/interface/add/"),t)},_=function(t){return i().get("".concat(o,"/interface/list/?page=")+t.page+"&size="+t.size,t)},h=function(t,e){return i().put("".concat(o,"/interface/edit/")+t+"/",e)},m=function(t){return i()["delete"]("".concat(o,"/interface/delete/")+t+"/")},v=function(t){return i().post("".concat(o,"/interface/deleteall/"),t)},w=function(t){return i().post("".concat(o,"/interface/detail/"),t)},x=function(){return i().get("".concat(o,"/interface/env/"))},y=function(t){return i().post("".concat(o,"/interface/run/"),t)},k=function(t){return i().get("".concat(o,"/env/list/?page=")+t.page+"&size="+t.size,t)},C=function(t,e){return i().put("".concat(o,"/env/edit/")+t+"/",e)},z=function(t){return i()["delete"]("".concat(o,"/env/delete/")+t+"/")},R=function(t){return i().post("".concat(o,"/env/add/"),t)},E=function(t){return i().post("".concat(o,"/env/detail/"),t)},D=function(t){return i().post("".concat(o,"/env/deleteall/"),t)},j=function(t){return i().get("".concat(o,"/debugtalk/list/?page=")+t.page+"&size="+t.size,t)},S=function(t){return i().post("".concat(o,"/debugtalk/detail/"),t)},V=function(t){return i().get("".concat(o,"/debugtalk/code/")+t+"/")},$=function(t){return i().put("".concat(o,"/debugtalk/update/"),t)},T=function(){return i().get("".concat(o,"/config/project/name/"))},A=function(t){return i().post("".concat(o,"/config/interface/name/"),t)},I=function(t){return i().post("".concat(o,"/config/save/"),t)},O=function(t){return i().get("".concat(o,"/config/list/?page=")+t.page+"&size="+t.size,t)},K=function(t){return i().post("".concat(o,"/config/detail/"),t)},L=function(t){return i()["delete"]("".concat(o,"/config/delete/")+t+"/")},q=function(t){return i().post("".concat(o,"/config/deleteall/"),t)},B=function(t){return i().get("".concat(o,"/config/detail/")+t+"/")},G=function(t,e){return i().put("".concat(o,"/config/update/")+t+"/",e)},P=function(){return i().get("".concat(o,"/testsuite/project/name/"))},Q=function(t){return i().post("".concat(o,"/testsuite/interface/name/"),t)},Z=function(t){return i().post("".concat(o,"/testsuite/add/"),t)},W=function(t){return i().get("".concat(o,"/testsuite/list/?page=")+t.page+"&size="+t.size,t)},M=function(t){return i().post("".concat(o,"/testsuite/detail/"),t)},N=function(t){return i().get("".concat(o,"/testsuite/detail/")+t+"/")},U=function(t,e){return i().put("".concat(o,"/testsuite/update/")+t+"/",e)},Y=function(t){return i().post("".concat(o,"/testsuite/deleteall/"),t)},H=function(t){return i()["delete"]("".concat(o,"/testsuite/delete/")+t+"/")},J=function(){return i().get("".concat(o,"/testcase/project/name/"))},X=function(t){return i().post("".concat(o,"/testcase/interface/name/"),t)},F=function(t){return i().post("".concat(o,"/testcase/configure/name/"),t)},tt=function(t){return i().post("".concat(o,"/testcase/name/"),t)},et=function(t){return i().post("".concat(o,"/testcase/add/"),t)},nt=function(t){return i().get("".concat(o,"/testcase/list/?page=")+t.page+"&size="+t.size)},rt=function(t){return i().post("".concat(o,"/testcase/detail/"),t)},it=function(t){return i()["delete"]("".concat(o,"/testcase/delete/")+t+"/")},ot=function(t){return i().post("".concat(o,"/testcase/deleteall/"),t)},ut=function(t){return i().get("".concat(o,"/testcase/get/detail/")+t+"/")},ct=function(t){return i().put("".concat(o,"/testcase/update/"),t)},at=function(){return i().get("".concat(o,"/testcase/get/env/"))},st=function(t){return i().post("".concat(o,"/testcase/run/"),t)},lt=function(t){return i().get("".concat(o,"/report/list/?page=")+t.page+"&size="+t.size)},ft=function(t){return i().get("".concat(o,"/report/view/")+t+"/")},dt=function(t){return i().post("".concat(o,"/report/download/")+t+"/")},pt=function(t){return i()["delete"]("".concat(o,"/report/delete/")+t+"/")},gt=function(t){return i().post("".concat(o,"/report/deleteall/"),t)},bt=function(t){return i().post("".concat(o,"/report/open/"),t)},_t=function(){return i().get("".concat(o,"/summary/data/"))},ht=function(t){return i().post("".concat(o,"/repository/add/"),t)},mt=function(t){return i().get("".concat(o,"/repository/list/?page=")+t.page+"&size="+t.size)},vt=function(t){return i().post("".concat(o,"/repository/detail/"),t)},wt=function(t){return i().put("".concat(o,"/repository/update/"),t)},xt=function(t){return i()["delete"]("".concat(o,"/repository/delete/")+t+"/")},yt=function(t){return i().post("".concat(o,"/repository/deleteall/"),t)},kt=function(t){return i().post("".concat(o,"/repository/search/"),t)},Ct=function(t){return i().post("".concat(o,"/repository/git/"),t)},zt=function(t){return i().post("".concat(o,"/repository/compile/"),t)}}}]);
//# sourceMappingURL=195-legacy.70377dd2.js.map